import{a as sr}from"./chunk-GQVLEIG6.js";import{f as Ut,j as Ge}from"./chunk-NZGOIL2E.js";var fr=Ut((Fr,rr)=>{Ge();var gr=function(){"use strict";function t(p,h,g,y){var F;typeof h=="object"&&(g=h.depth,y=h.prototype,F=h.filter,h=h.circular);var L=[],M=[],z=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof g>"u"&&(g=1/0);function R(P,te){if(P===null)return null;if(te==0)return P;var B,E;if(typeof P!="object")return P;if(t.__isArray(P))B=[];else if(t.__isRegExp(P))B=new RegExp(P.source,D(P)),P.lastIndex&&(B.lastIndex=P.lastIndex);else if(t.__isDate(P))B=new Date(P.getTime());else{if(z&&Buffer.isBuffer(P))return Buffer.allocUnsafe?B=Buffer.allocUnsafe(P.length):B=new Buffer(P.length),P.copy(B),B;typeof y>"u"?(E=Object.getPrototypeOf(P),B=Object.create(E)):(B=Object.create(y),E=y)}if(h){var x=L.indexOf(P);if(x!=-1)return M[x];L.push(P),M.push(B)}for(var V in P){var w;E&&(w=Object.getOwnPropertyDescriptor(E,V)),!(w&&w.set==null)&&(B[V]=R(P[V],te-1))}return B}return R(p,g)}t.clonePrototype=function(h){if(h===null)return null;var g=function(){};return g.prototype=h,new g};function e(p){return Object.prototype.toString.call(p)}t.__objToStr=e;function u(p){return typeof p=="object"&&e(p)==="[object Date]"}t.__isDate=u;function i(p){return typeof p=="object"&&e(p)==="[object Array]"}t.__isArray=i;function f(p){return typeof p=="object"&&e(p)==="[object RegExp]"}t.__isRegExp=f;function D(p){var h="";return p.global&&(h+="g"),p.ignoreCase&&(h+="i"),p.multiline&&(h+="m"),h}return t.__getRegExpFlags=D,t}();typeof rr=="object"&&rr.exports&&(rr.exports=gr)});var cr=Ut((wr,lr)=>{Ge();var yr=fr();lr.exports=function(t,e){return t=t||{},Object.keys(e).forEach(function(u){typeof t[u]>"u"&&(t[u]=yr(e[u]))}),t}});var Dr=Ut((kr,pr)=>{Ge();pr.exports=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]]});var vr=Ut((Br,ar)=>{"use strict";Ge();var Cr=cr(),Kt=Dr(),mr={nul:0,control:0};ar.exports=function(e){return hr(e,mr)};ar.exports.config=function(t){return t=Cr(t||{},mr),function(u){return hr(u,t)}};function hr(t,e){if(typeof t!="string")return dr(t,e);for(var u=0,i=0;i<t.length;i++){var f=dr(t.charCodeAt(i),e);if(f<0)return-1;u+=f}return u}function dr(t,e){return t===0?e.nul:t<32||t>=127&&t<160?e.control:xr(t)?0:1+(t>=4352&&(t<=4447||t==9001||t==9002||t>=11904&&t<=42191&&t!=12351||t>=44032&&t<=55203||t>=63744&&t<=64255||t>=65040&&t<=65049||t>=65072&&t<=65135||t>=65280&&t<=65376||t>=65504&&t<=65510||t>=131072&&t<=196605||t>=196608&&t<=262141))}function xr(t){var e=0,u=Kt.length-1,i;if(t<Kt[0][0]||t>Kt[u][1])return!1;for(;u>=e;)if(i=Math.floor((e+u)/2),t>Kt[i][1])e=i+1;else if(t<Kt[i][0])u=i-1;else return!0;return!1}});var br=Ut((exports,module)=>{Ge();(function(t){var e=function(){return e.cache.hasOwnProperty(arguments[0])||(e.cache[arguments[0]]=e.parse(arguments[0])),e.format.call(null,e.cache[arguments[0]],arguments)};e.format=function(D,p){var h=1,g=D.length,y="",F,L=[],M,z,R,P,te,B;for(M=0;M<g;M++)if(y=i(D[M]),y==="string")L.push(D[M]);else if(y==="array"){if(R=D[M],R[2])for(F=p[h],z=0;z<R[2].length;z++){if(!F.hasOwnProperty(R[2][z]))throw e('[sprintf] property "%s" does not exist',R[2][z]);F=F[R[2][z]]}else R[1]?F=p[R[1]]:F=p[h++];if(/[^s]/.test(R[8])&&i(F)!=="number")throw e("[sprintf] expecting number but found %s",i(F));switch(R[8]){case"b":F=F.toString(2);break;case"c":F=String.fromCharCode(F);break;case"d":F=parseInt(F,10);break;case"e":F=R[7]?F.toExponential(R[7]):F.toExponential();break;case"f":F=R[7]?parseFloat(F).toFixed(R[7]):parseFloat(F);break;case"o":F=F.toString(8);break;case"s":F=(F=String(F))&&R[7]?F.slice(0,R[7]):F;break;case"u":F=F>>>0;break;case"x":F=F.toString(16);break;case"X":F=F.toString(16).toUpperCase();break}F=/[def]/.test(R[8])&&R[3]&&F>=0?" +"+F:F,te=R[4]?R[4]==="0"?"0":R[4].charAt(1):" ",B=R[6]-String(F).length,P=R[6]?f(te,B):"",L.push(R[5]?F+P:P+F)}return L.join("")},e.cache={},e.parse=function(D){for(var p=D,h=[],g=[],y=0;p;){if((h=/^[^\x25]+/.exec(p))!==null)g.push(h[0]);else if((h=/^\x25{2}/.exec(p))!==null)g.push("%");else if((h=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(p))!==null){if(h[2]){y|=1;var F=[],L=h[2],M=[];if((M=/^([a-z_][a-z_\d]*)/i.exec(L))!==null)for(F.push(M[1]);(L=L.slice(M[0].length))!=="";)if((M=/^\.([a-z_][a-z_\d]*)/i.exec(L))!==null)F.push(M[1]);else if((M=/^\[(\d+)\]/.exec(L))!==null)F.push(M[1]);else throw"[sprintf] huh?";else throw"[sprintf] huh?";h[2]=F}else y|=2;if(y===3)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";g.push(h)}else throw"[sprintf] huh?";p=p.slice(h[0].length)}return g};var u=function(D,p,h){return h=p.slice(0),h.splice(0,0,D),e.apply(null,h)};function i(D){return Object.prototype.toString.call(D).slice(8,-1).toLowerCase()}function f(D,p){for(var h=[];p>0;h[--p]=D);return h.join("")}t.sprintf=e,t.vsprintf=u})(typeof global<"u"?global:self||window);(function(t,e){var u;if(typeof window<"u")u=window;else if(typeof self<"u")u=self;else if(typeof global<"u")u=global;else throw new Error("Unknow context");typeof define=="function"&&define.amd?define(["jquery","wcwidth"],function(i,f){return t(i,f,u),i}):typeof module=="object"&&module.exports?module.exports=function(i,f,D){return f===e&&(typeof window<"u"?f=sr():f=sr()(i)),D===e&&(D=vr()),t(f,D,i),f}:(u.jQuery||(u.$=u.cash),t(u.jQuery||u.cash,u.wcwidth,u))})(function($,wcwidth,root,undefined){"use strict";function debug(t){}function DelayQueue(){var t=$.Callbacks(),e=!1,u=this;this.resolve=function(){t.fire(),u.resolved=e=!0},this.add=function(i){e?i():t.add(i)}}$.omap=function(t,e){var u={};return $.each(t,function(i,f){u[i]=e.call(t,i,f)}),u},$.fn.text_length=function(){return this.map(function(){return $(this).text().length}).get().reduce(function(t,e){return t+e},0)};var Clone={clone_object:function(t){var e={};if(typeof t=="object"){if(Array.isArray(t))return this.clone_array(t);if(t===null)return t;for(var u in t)Array.isArray(t[u])?e[u]=this.clone_array(t[u]):typeof t[u]=="object"?e[u]=this.clone_object(t[u]):e[u]=t[u]}return e},clone_array:function(t){if(!is_function(Array.prototype.map))throw new Error("Your browser don't support ES5 array map use es5-shim");return t.slice(0).map(function(e){return typeof e=="object"?this.clone_object(e):e}.bind(this))}},clone=function(t){return Clone.clone_object(t)};"Map"in root&&!("clear"in Map.prototype)&&(Map.prototype.clear=function(){this.forEach(function(t,e,u){u.delete(e)})});var localStorage;(function(){var t=function(){try{var y="test",F=window.localStorage;return F.setItem(y,"1"),F.removeItem(y),!0}catch{return!1}},e=function(){try{return document.cookie.split(";"),!0}catch{return!1}},u=t();function i(y,F){var L;if(typeof y=="string"&&typeof F=="string")return localStorage[y]=F,!0;if(typeof y=="object"&&typeof F>"u"){for(L in y)y.hasOwnProperty(L)&&(localStorage[L]=y[L]);return!0}return!1}function f(y,F){var L,M,z;if(L=new Date,L.setTime(L.getTime()+31536e6),M="; expires="+L.toGMTString(),typeof y=="string"&&typeof F=="string")return document.cookie=y+"="+F+M+"; path=/",!0;if(typeof y=="object"&&typeof F>"u"){for(z in y)y.hasOwnProperty(z)&&(document.cookie=z+"="+y[z]+M+"; path=/");return!0}return!1}function D(y){return localStorage[y]}function p(y){var F,L,M,z;for(F=y+"=",L=document.cookie.split(";"),M=0;M<L.length;M++){for(z=L[M];z.charAt(0)===" ";)z=z.slice(1,z.length);if(z.indexOf(F)===0)return z.slice(F.length,z.length)}return null}function h(y){return delete localStorage[y]}function g(y){return f(y,"",-1)}!e()&&!u?(localStorage={},$.extend({Storage:{set:i,get:D,remove:h}})):(u&&(localStorage=window.localStorage),$.extend({Storage:{set:u?i:f,get:u?D:p,remove:u?h:g}}))})();var debounce=function(){var t="Expected a function";function e(i){var f=typeof i;return i!=null&&(f=="object"||f=="function")}function u(){return Date.now()}return function(f,D,p){var h=Math.max,g=Math.min,y,F,L,M,z,R,P=0,te=!1,B=!1,E=!0;if(typeof f!="function")throw new TypeError(t);D=D||0,e(p)&&(te=!!p.leading,B="maxWait"in p,L=B?h(p.maxWait||0,D):L,E="trailing"in p?!!p.trailing:E);function x(re){var ee=y,Z=F;return y=F=undefined,P=re,M=f.apply(Z,ee),M}function V(re){return P=re,z=setTimeout(ue,D),te?x(re):M}function w(re){var ee=re-R,Z=re-P,Fe=D-ee;return B?g(Fe,L-Z):Fe}function ie(re){var ee=re-R,Z=re-P;return R===undefined||ee>=D||ee<0||B&&Z>=L}function ue(){var re=u();if(ie(re))return j(re);z=setTimeout(ue,w(re))}function j(re){return z=undefined,E&&y?x(re):(y=F=undefined,M)}function pe(){z!==undefined&&clearTimeout(z),P=0,y=R=F=z=undefined}function se(){return z===undefined?M:j(u())}function Q(){var re=u(),ee=ie(re);if(y=arguments,F=this,R=re,ee){if(z===undefined)return V(R);if(B)return z=setTimeout(ue,D),x(R)}return z===undefined&&(z=setTimeout(ue,D)),M}return Q.cancel=pe,Q.flush=se,Q}}(),jQuery=$;(function(t){jQuery.fn.extend({everyTime:function(e,u,i,f,D){return this.each(function(){jQuery.timer.add(this,e,u,i,f,D)})},oneTime:function(e,u,i){return this.each(function(){jQuery.timer.add(this,e,u,i,1)})},stopTime:function(e,u){return this.each(function(){jQuery.timer.remove(this,e,u)})}}),jQuery.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(e){if(e===undefined||e===null)return null;var u=this.regex.exec(e.toString().trim());if(u[2]){var i=parseInt(u[1],10),f=this.powers[u[2]]||1;return i*f}else return e},add:function(e,u,i,f,D,p){var h=0;if(typeof i=="function"&&(D||(D=f),f=i,i=u),u=jQuery.timer.timeParse(u),!(typeof u!="number"||isNaN(u)||u<=0)){D&&D.constructor!==Number&&(p=!!D,D=0),D=D||0,p=p||!1,e.$timers||(e.$timers={}),e.$timers[i]||(e.$timers[i]={}),f.$timerID=f.$timerID||this.guid++;var g=function(){p&&g.inProgress||(g.inProgress=!0,(++h>D&&D!==0||f.call(e,h)===!1)&&jQuery.timer.remove(e,i,f),g.inProgress=!1)};g.$timerID=f.$timerID,e.$timers[i][f.$timerID]||(e.$timers[i][f.$timerID]=setInterval(g,u)),this.global[i]||(this.global[i]=[]),this.global[i].push(e)}},remove:function(e,u,i){var f=e.$timers,D;if(f){if(u){if(f[u]){if(i)i.$timerID&&(clearInterval(f[u][i.$timerID]),delete f[u][i.$timerID]);else for(var h in f[u])f[u].hasOwnProperty(h)&&(clearInterval(f[u][h]),delete f[u][h]);for(D in f[u])if(f[u].hasOwnProperty(D))break;D||(D=null,delete f[u])}}else for(var p in f)f.hasOwnProperty(p)&&this.remove(e,p,i);for(D in f)if(f.hasOwnProperty(D))break;D||(e.$timers=null)}}}}),/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())&&t(window).one("unload",function(){var e=jQuery.timer.global;for(var u in e)if(e.hasOwnProperty(u))for(var i=e[u],f=i.length;--f;)jQuery.timer.remove(i[f],u)})})(jQuery),function(t){if(String.prototype.split.toString().match(/\[native/)){var e=String.prototype.split,u=/()??/.exec("")[1]===t,i;return i=function(f,D,p){if(Object.prototype.toString.call(D)!=="[object RegExp]")return e.call(f,D,p);var h=[],g=(D.ignoreCase?"i":"")+(D.multiline?"m":"")+(D.extended?"x":"")+(D.sticky?"y":""),y=0,F,L,M,z;for(D=new RegExp(D.source,g+"g"),f+="",u||(F=new RegExp("^"+D.source+"$(?!\\s)",g)),p=p===t?-1>>>0:p>>>0;(L=D.exec(f))&&(M=L.index+L[0].length,!(M>y&&(h.push(f.slice(y,L.index)),!u&&L.length>1&&L[0].replace(F,function(){for(var R=1;R<arguments.length-2;R++)arguments[R]===t&&(L[R]=t)}),L.length>1&&L.index<f.length&&Array.prototype.push.apply(h,L.slice(1)),z=L[0].length,y=M,h.length>=p)));)D.lastIndex===L.index&&D.lastIndex++;return y===f.length?(z||!D.test(""))&&h.push(""):h.push(f.slice(y)),h.length>p?h.slice(0,p):h},String.prototype.split=function(f,D){return i(this,f,D)},i}}(),$.fn.caret=function(t){var e=this[0],u=e.contentEditable==="true";if(arguments.length===0){if(window.getSelection){if(u){this.is(":focus")||e.focus();var i=window.getSelection().getRangeAt(0),f=i.cloneRange();return f.selectNodeContents(e),f.setEnd(i.endContainer,i.endOffset),f.toString().length}return e.selectionStart}if(document.selection){if(e.focus(),u){var i=document.selection.createRange(),f=document.body.createTextRange();return f.moveToElementText(e),f.setEndPoint("EndToEnd",i),f.text.length}var t=0,D=e.createTextRange(),f=document.selection.createRange().duplicate(),p=f.getBookmark();for(D.moveToBookmark(p);D.moveStart("character",-1)!==0;)t++;return t}return 0}if(t===-1&&(t=this[u?"text":"val"]().length),window.getSelection)if(u){this.is(":focus")||e.focus();var h=window.getSelection();h.collapse(h.focusNode,t)}else e.setSelectionRange(t,t);else if(document.body.createTextRange){var D=document.body.createTextRange();D.moveToElementText(e),D.moveStart("character",t),D.collapse(!0),D.select()}return!u&&!this.is(":focus")&&e.focus(),t};function make_callback_plugin(t){var e=$.extend({init:$.noop,destroy:$.noop,name:"event"},t);return function(u,i){var f=arguments.length===0,D=arguments[0]==="unbind";if(!f&&!D&&!is_function(u))throw new Error('Invalid argument, it need to a function or string "unbind" or no arguments.');D&&(u=is_function(arguments[1])?arguments[1]:null);var p="callbacks_"+e.name;return this.each(function(){var h=$(this),g;function y(F){g.fireWith(h,[F])}f||D?(g=h.data(p),f?g&&g.fire():(u&&g?(g.remove(u),g.has()||(g=null)):g=null,g||(h.removeData(p),e.destroy.call(this,y,i)))):h.data(p)?$(this).data(p).add(u):(g=$.Callbacks(),g.add(u),h.data(p,g),e.init.call(this,y,i))})}}$.fn.resizer=make_callback_plugin({name:"resize",init:function(t,e){var u=$.extend({prefix:""},e),i=$(this),f,D=!0;if(i.is("body"))$(window).on("resize.resizer",t);else if(window.ResizeObserver)f=new ResizeObserver(function(){D||setTimeout(t,0),D=!1}),f.observe(this),i.data("observer",f);else{var p=$("<iframe/>").addClass(u.prefix+"resizer").appendTo(this)[0];$(p.contentWindow).on("resize",t)}},destroy:function(){var t=$(this);if(window.ResizeObserver){var e=t.data("observer");e&&(e.unobserve(this),t.removeData("observer"))}else{var u=t.find('> iframe[class$="resizer"]');u.length?($(u[0].contentWindow).off("resize").remove(),u.remove()):t.is("body")&&$(window).off("resize.resizer")}}}),$.fn.touch_scroll=make_callback_plugin({name:"touch",init:function(t){var e,u;$(this).on("touchstart.scroll",function(i){i=i.originalEvent,i.target.tagName.toLowerCase()!=="a"&&i.touches.length===1&&(u=e=i.touches[0])}).on("touchmove.scroll",function(i){if(i=i.originalEvent,e&&i.touches.length===1){var f=i.touches[0],D=t({origin:e,previous:u,current:f});D===!1&&i.preventDefault(),u=f}}).on("touchend.scroll",function(){(e||u)&&(e=u=null)})},destroy:function(){$(this).off("touchstart.scroll touchmove.scroll touchend.scroll")}}),$.fn.on_load=function(t){var e=$.extend({error:$.noop,load:$.noop,done:$.noop},t),u=[];return this.find("img,iframe").each(function(){var i=$(this),f=new $.Deferred;i.on("load",f.resolve).on("error",function(){e.error(i),f.reject()}),u.push(f)}),e.load(!!u.length),u.length?$.when.apply($,u).then(function(){e.done(!0)}):e.done(!1),this};function jquery_resolve(t){var e=jQuery.Deferred();return e.resolve(t),e.promise()}function always(t,e){return is_function(t.finally)?t.finally(e):is_function(t.always)?t.always(e):t}function unpromise(t,e,u){if(t!==undefined){if(is_promise(t))return is_function(t.done)?t=t.done(e):is_function(t.then)&&(t=t.then(e)),is_function(t.catch)&&is_function(u)&&t.catch(u),t;if(t instanceof Array){var i=t.filter(function(D){return D&&(is_function(D.done)||is_function(D.then))});if(i.length){var f=$.when.apply($,t).then(function(){return e([].slice.call(arguments))});return is_function(f.catch)&&(f=f.catch(u)),f}}return e(t)}}function defined(t){return t===undefined?!0:t}$.fn.is_fully_in_viewport=function(){function t(e,u){var i=e.getBoundingClientRect(),f=u[0].getBoundingClientRect(),D=i.top-f.top,p=i.bottom-f.top,h=u.height();return p>0&&D<=h}return root.IntersectionObserver?function(e){var u=this[0],i=jQuery.Deferred(),f=new root.IntersectionObserver(function(D){i.resolve(D[0].isIntersecting&&D[0].ratio===1),f.unobserve(u)},{root:e[0]});return f.observe(u),i.promise()}:function(e){return jquery_resolve(t(this[0],e))}}();var entity_re=/(&(?:[a-z\d]+|#\d+|#x[a-f\d]+);)/i,space_re=/\s/,combine_chr_re=/(.(?:[\u0300-\u036F]|[\u1AB0-\u1abE]|[\u1DC0-\u1DF9]|[\u1DFB-\u1DFF]|[\u20D0-\u20F0]|[\uFE20-\uFE2F])+)/,astral_symbols_re=/([\uD800-\uDBFF][\uDC00-\uDFFF])/,emoji_re=/(\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68(?:\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC3B\u200D\u2744|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDF])\u200D[\u2640\u2642])\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F?|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD]))/,mobile_re=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,tablet_re=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,format_split_re=/(\[\[(?:-?[@!gbiusor])*;[^;]*;[^\]]*\](?:[^\]\\]*(?:\\\\)*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)\]?)/i,format_parts_re=/\[\[((?:-?[@!gbiusor])*);([^;]*);([^;\]]*);?([^;\]]*);?([^\]]*)\]([^\]\\]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]+)\]?/gi,format_re=/\[\[((?:-?[@!gbiusor])*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)\]?/gi,format_exist_re=/\[\[((?:-?[@!gbiusor])*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)\]/gi,format_full_re=/^(\[\[(?:(?:-?[@!gbiusor])*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\])([^\]]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)(\])$/i,format_begin_re=/(\[\[(?:-?[@!gbiusor])*;[^;]*;[^\]]*\])/i,format_start_re=/^(\[\[(?:-?[@!gbiusor])*;[^;]*;[^\]]*\])/i,format_end_re=/\[\[(?:-?[@!gbiusor])*;[^;]*;[^\]]*\]?$/i,self_closing_re=/^(?:\[\[)?[^;]*@[^;]*;/,color_re=/^(?:#([0-9a-f]{3}|[0-9a-f]{4}|[0-9a-f]{6}|[0-9a-f]{8})|rgba?\([^)]+\)|hsla?\([^)]+\))$/i,url_re=/(\b(?:file|ftp|https?):\/\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\s"'\\<>\][)])+)/gi,url_nf_re=/\b(?![^"\s[\]]*])(https?:\/\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\s"'\\<>\][)])+)/gi,email_re=/((([^<>('")[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))/g,url_full_re=/^(https?:\/\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\s"'<>\\\][)])+)$/gi,email_full_re=/^((([^<>('")[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))$/g,command_re=/((?:"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|`[^`\\]*(?:\\[\S\s][^`\\]*)*`|\/[^\/\\]*(?:\\[\S\s][^\/\\]*)*\/[gimsuy]*(?=\s|$)|(?:\\\s|\S))+)(?=\s|$)/gi,extended_command_re=/^\s*((terminal|cmd)::([a-z_]+)\(([\s\S]*)\))\s*$/,format_exec_split_re=/(\[\[(?:-?[@!gbiusor])*;[^\]]+\](?:\\[[\]]|[^\]])*\]|\[\[[\s\S]+?\]\])/,format_exec_re=/(\[\[[\s\S]+?\]\])/,float_re=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/,re_re=/^\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimsuy]*)$/,string_re=/("(?:[^"\\]|\\(?:\\\\)*"|\\\\)*"|'(?:[^'\\]|\\(?:\\\\)*'|\\\\)*'|`(?:[^`\\]|\\(?:\\\\)*`|\\\\)*`)/,unclosed_strings_re=/^(?=((?:[^"']+|"[^"\\]*(?:\\[^][^"\\]*)*"|'[^'\\]*(?:\\[^][^'\\]*)*')*))\1./,broken_image='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 14"><title id="title2">rounded</title><path id="terminal-broken-image" d="m 14,10 h 2 v 1 a 3,3 0 0 1 -3,3 H 3 A 3,3 0 0 1 0,11 H 4.5 A 1.00012,1.00012 0 0 0 5.207,10.707 L 6.5,9.414 7.793,10.707 a 0.99963,0.99963 0 0 0 1.41406,0 l 2.36719,-2.36719 1.80127,1.44092 A 0.99807,0.99807 0 0 0 14,10 Z M 16,3 V 8 H 14.35059 L 12.12451,6.21924 A 0.99846,0.99846 0 0 0 10.793,6.293 L 8.5,8.586 7.207,7.293 a 0.99962,0.99962 0 0 0 -1.41406,0 L 4.08594,9 H 0 V 3 A 3,3 0 0 1 3,0 h 10 a 3,3 0 0 1 3,3 z M 6,4.5 A 1.5,1.5 0 1 0 4.5,6 1.5,1.5 0 0 0 6,4.5 Z" /></svg>',use_broken_image='<svg class="terminal-broken-image" role="presentation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 14" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="#terminal-broken-image"/></svg>',animation_supported=function(){if(typeof document>"u")return!1;var t=!1,e="Webkit Moz O ms Khtml".split(" "),u=document.createElement("div");if(u.style.animationName&&(t=!0),t===!1)for(var i=0;i<e.length;i++){var f=e[i]+"AnimationName";if(u.style[f]!==undefined){t=!0;break}}return u=null,t}(),agent=(root.navigator||window.navigator).userAgent,is_IE=/MSIE|Trident/.test(agent)||/rv:11.0/i.test(agent),is_IEMobile=/IEMobile/.test(agent),is_ch_unit_supported=function(){if(is_IE&&!is_IEMobile)return!1;if(typeof document>"u")return!0;var t=document.createElement("div");return t.style.width="1ch",t.style.width==="1ch"}(),is_css_variables_supported=root.CSS&&root.CSS.supports&&root.CSS.supports("(--fake-var: 0)"),is_android=navigator.userAgent.toLowerCase().indexOf("android")!==-1,is_key_native=function(){if(!("KeyboardEvent"in root&&"key"in root.KeyboardEvent.prototype))return!1;var e=root.KeyboardEvent.prototype,u=Object.getOwnPropertyDescriptor(e,"key").get;return!!u.toString().match(/\[native code\]/)}(),is_browser=function(){try{return this===window}catch{return!1}}(),is_mobile=function(t){var e=!1;return(mobile_re.test(t)||tablet_re.test(t.substr(0,4)))&&(e=!0),navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1?!0:e}(navigator.userAgent||navigator.vendor||root.opera),ch_unit_bug=!1;is_browser&&$(function(){function t(f){return f[0].getBoundingClientRect().width}var e='<span style="font-family: monospace;visibility:hidden;',u=$(e+'width:1ch;overflow: hidden">&nbsp;</span>');u.appendTo("body");var i=$(e+'">&nbsp;</span>').appendTo("body");ch_unit_bug=Math.abs(t(u)-t(i))>1e-4,u.remove(),i.remove()});function css(t,e,u){if(t instanceof $.fn.init)t.each(function(){css(this,e,u)});else if($.isPlainObject(e))Object.keys(e).forEach(function(i){t.style.setProperty(i,e[i])});else{if(typeof u>"u")return t.style.getPropertyValue(e);t.style.setProperty(e,u)}}function style_prop(t,e,u){var i=[t+":"+e+"px",t+":calc("+e+"px / var(--pixel-density, 1))"];return u&&(i=i.map(function(f){return f+" !important"})),i.join(";")}function a11y_hide(t){t.attr({role:"presentation","aria-hidden":"true"})}var excepctions=[];function alert_exception(t,e){arguments[0]instanceof $.terminal.Exception&&(t=arguments[0].type,e=arguments[0]);var u=(t?t+": ":"")+exception_message(e);excepctions.indexOf(u)===-1&&(excepctions.push(u),setTimeout(function(){throw e},0))}function generate_id(){var t=Math.random()*46656|0,e=Math.random()*46656|0;return t=("000"+t.toString(36)).slice(-3),e=("000"+e.toString(36)).slice(-3),t+e}function scrollbar_event(t,e,u){u=u||1;var i=e.offset().left,f=e.outerWidth()*u;return f<=t.clientX-i}function exception_message(t){return typeof t=="string"?t:typeof t.fileName=="string"?t.fileName+": "+t.message:t.message}function Cycle(){var t=[].slice.call(arguments),e=0;$.extend(this,{get:function(){return t},index:function(){return e},rotate:function(u,i){if(i===undefined)i=e;else if(i===e)return;if(!u){var f=t.filter(function(D){return typeof D<"u"});if(!f.length)return}if(t.length)return t.length===1?t[0]:(e===t.length-1?e=0:++e,typeof t[e]<"u"?t[e]:this.rotate(!0,i))},length:function(){return t.length},remove:function(u){delete t[u]},set:function(u){for(var i=t.length;i--;)if(t[i]===u){e=i;return}this.append(u),e=t.length-1},front:function(){if(t.length){for(var u=e,i=!1;!t[u];)if(u++,u>t.length){if(i)break;u=0,i=!0}return t[u]}},map:function(u){return t.map(function(i,f){return typeof i<"u"?u(i,f):null}).filter(Boolean)},forEach:function(u){return t.forEach(function(i,f){typeof i<"u"&&u(i,f)})},append:function(u){t.push(u)}})}function Stack(t){var e=is_array(t)?t:t?[t]:[];$.extend(this,{data:function(){return e},map:function(u){return $.map(e,u)},size:function(){return e.length},pop:function(){if(e.length===0)return null;var u=e[e.length-1];return e=e.slice(0,e.length-1),u},push:function(u){return e=e.concat([u]),u},top:function(){return e.length>0?e[e.length-1]:null},clone:function(){return new Stack(e.slice(0))}})}function WorkerCache(t){var e=$.extend({validation:$.noop,action:$.noop,onCache:$.noop},t);this._onCache=e.onCache.bind(this),this._action=e.action.bind(this),this._validation=e.validation.bind(this),"Map"in root&&(this._cache=new Map)}WorkerCache.prototype.validate=function(t){var e=this._validation(t),u=e===undefined||e===!0;return u||this._cache.clear(),u},WorkerCache.prototype.clear=function(){this._cache.clear()},WorkerCache.prototype.get=function(t){if(!this._cache)return this._action(t);var e;return this.validate(t)&&this._cache.has(t)?(e=this._cache.get(t),this._onCache({cache:e}),e):(e=this._action(t),this._cache.set(t,e),e)};function History(t,e,u){var i=!0,f="";typeof t=="string"&&t!==""&&(f=t+"_"),f+="commands";var D;u?D=[]:(D=$.Storage.get(f),D=D?JSON.parse(D):[]);var p=D.length-1;$.extend(this,{append:function(h){i&&D[D.length-1]!==h&&(D.push(h),e&&D.length>e&&(D=D.slice(-e)),p=D.length-1,u||$.Storage.set(f,JSON.stringify(D)))},set:function(h){is_array(h)&&(D=h,u||$.Storage.set(f,JSON.stringify(D)))},data:function(){return D},reset:function(){p=D.length-1},last:function(){return D[D.length-1]},end:function(){return p===D.length-1},position:function(){return p},current:function(){return D[p]},next:function(){var h=p;if(p<D.length-1&&++p,h!==p)return D[p]},previous:function(){var h=p;if(p>0&&--p,h!==p)return D[p]},clear:function(){D=[],this.purge()},enabled:function(){return i},enable:function(){i=!0},purge:function(){u||$.Storage.remove(f)},disable:function(){i=!1},toggle:function(h){typeof h>"u"?i=!i:i=h}})}function OutputLines(t){this._settings=t,this._lines=[],this._snapshot=[]}OutputLines.prototype.make_snapshot=function(t){this._snapshot.push(t)},OutputLines.prototype.get_partial=function(){if(!this._snapshot.length)return[];var t=this._snapshot[this._snapshot.length-1];return t},OutputLines.prototype.update_snapshot=function(t,e){this._snapshot[t]=e},OutputLines.prototype.limit_snapshot=function(t){this._snapshot=this._snapshot.slice(t)},OutputLines.prototype.clear_snapshot=function(){this._snapshot=[]},OutputLines.prototype.get_snapshot=function(){return this._snapshot.reduce(function(t,e){return e?t.concat(e):t},[]).join(`
`)},OutputLines.prototype.join=function(){var t=[].slice.call(arguments);return t.some(is_function)?function(){return t.reduce(function(e,u){return is_function(e)&&(e=e()),is_function(u)&&(u=u()),is_promise(e)||is_promise(u)?$.when(e,u).then(function(i,f){return i+f}):u})}:t.some(is_promise)?t.reduce(function(e,u){return $.when(e,u).then(function(i,f){return i+f})}):t.join("")},OutputLines.prototype.import=function(t){this._lines=t},OutputLines.prototype.push=function(t){var e=t[0],u=t[1];if(this.has_newline())this._lines.push(t);else{var i=this.last_line();i[0]=this.join(i[0],e),i[1].newline=u.newline}},OutputLines.prototype.clear=function(t){this._lines.forEach(function(e,u){var i=e[1];is_function(i.onClear)&&i.onClear.call(self,t(u))}),this._lines=[],this._snapshot=[]},OutputLines.prototype.data=function(){return this._lines.filter(Boolean)},OutputLines.prototype.has_newline=function(){var t=this.last_line();return t?t[1].newline:!0},OutputLines.prototype.unmount=function(t){var e=t.data("index"),u=this._lines[e];if(u){var i=u[1];is_function(i.unmount)&&i.unmount.call(self,t)}},OutputLines.prototype.last_line=function(){var t=this.data(),e=t.length;return t[e-1]},OutputLines.prototype.update=function(t,e,u){if(e===null)delete this._lines[t],delete this._snapshot[t];else return this._lines[t][0]=e,u&&(this._lines[t][1]=$.extend(this._lines[t][1],u)),this._lines[t][1]},OutputLines.prototype.length=function(){return this._lines.length},OutputLines.prototype.valid_index=function(t){return!!this._lines[t]},OutputLines.prototype.render=function(t,e){var u=this._settings(),i=[];if(this._snapshot=[],u.outputLimit>=0){var f;u.outputLimit===0?f=t:f=u.outputLimit,this._lines.forEach(function(p,h){var g=p[0],y=p[1];i.push({value:g,index:h,options:y})});var D=i.length-f-1;i=i.slice(D)}else i=this._lines.map(function(p,h){return{value:p[0],index:h,options:p[1]}});return e(i)};function FormatBuffer(t){this._options=t,"Map"in root&&(this._format_cache=new Map),this._output_buffer=[]}FormatBuffer.NEW_LINE=1,FormatBuffer.prototype.format=function(e,u,i){var f=this._format_cache&&this._settings.useCache;if(f){var D=JSON.stringify([e,this._settings]);if(this._format_cache.has(D))return this._format_cache.get(D)}var p={line:$.terminal.format(e,this._settings),raw:i,newline:u};return f&&this._format_cache.set(D,p),p},FormatBuffer.prototype.empty=function(){return!this._output_buffer.length},FormatBuffer.prototype.append=function(t,e,u,i){if(this._settings=$.extend({useCache:!0},this._options(u)),this._output_buffer.push(FormatBuffer.NEW_LINE),t instanceof Array)for(var f=0,D=t.length;f<D;++f)if(t[f]===""||t[f]==="\r")this._output_buffer.push({line:"",raw:""});else{var p=this.format(t[f],f===D-1,i[f]);this._output_buffer.push(p)}else u.raw?this._output_buffer.push({line:t,raw:i}):this._output_buffer.push(this.format(t,!1,i));this._output_buffer.push({finalize:u.finalize,index:e,raw:u.raw,newline:u.newline})},FormatBuffer.prototype.clear_cache=function(){this._format_cache&&this._format_cache.clear()},FormatBuffer.prototype.output=function(){return this._output_buffer.slice()},FormatBuffer.prototype.is_empty=function(){return!this._output_buffer.length},FormatBuffer.prototype.clear=function(){this._output_buffer=[]},FormatBuffer.prototype.forEach=function(t){for(var e=0;e<this._output_buffer.length;){var u=this._output_buffer[e++];u===FormatBuffer.NEW_LINE?t():t(u)}},FormatBuffer.prototype.flush=function(t){this.forEach(t),this.clear()};function with_prompt(t,e,u){function i(h){var g=$.terminal.escape_brackets("[ERR]> ");e("[[;red;]"+g+"]"),alert_exception("Prompt",h)}function f(h){e(h),D.resolve()}var D=new $.Deferred;switch(typeof t){case"string":f(t);break;case"function":try{var p=t.call(u,function(h){f(h)});typeof p=="string"&&f(p),p&&p.then&&p.then(f).catch(i)}catch(h){i(h)}break}return D.promise()}var cmd_index=0;$.cmd={defaults:{mask:!1,caseSensitiveSearch:!0,historySize:60,prompt:"> ",enabled:!0,history:!0,onPositionChange:$.noop,onCommandChange:$.noop,inputStyle:"textarea",mobileDelete:is_mobile,onPaste:$.noop,clickTimeout:200,holdTimeout:400,holdRepeatTimeout:200,mobileIngoreAutoSpace:[],repeatTimeoutKeys:[],tabindex:1,tabs:4}},$.fn.cmd=function(t){var e=$.extend({},$.cmd.defaults,t);function u(s){return e.mobileIngoreAutoSpace.length&&e.mobileIngoreAutoSpace.indexOf(s)!==-1&&is_android}var i=this,f=i.data("cmd");if(f)return f;var D=cmd_index++;i.addClass("cmd");var p=$('<div class="cmd-wrapper"/>').appendTo(i);p.append('<span class="cmd-prompt"></span>'),p.append('<div class="cmd-cursor-line"><span></span><span class="cmd-cursor"><span data-text class="end"><span>&nbsp;</span></span></span><span></span></div>');var h=p.find(".cmd-cursor-line");a11y_hide(h);var g;is_mobile?(g=function(){var s=$('<div class="cmd-editable" contenteditable/>').attr({autocapitalize:"off",autocorrect:"off",spellcheck:"false",tabindex:e.tabindex}).insertAfter(i);s.on("focus",function(){i.enable()}).on("blur",function(){i.disable()});var v,_={$node:s,val:function(T){if(typeof T>"u")return s.text();s.html(T)},reset:function(){clearTimeout(v),v=setTimeout(function(){s.css({top:"",bottom:""})},100)},focus:function(){css(s[0],{top:"calc(var(--terminal-scroll, 0) * 1px)"}),_.reset()},blur:function(){s.css({top:"100%",bottom:0}).blur(),window.getSelection().removeAllRanges(),_.reset()}};return _}(),i.addClass("cmd-mobile")):(g=function(){var s=generate_id(),v=$("<textarea>").attr({autocapitalize:"off",spellcheck:"false",id:s,tabindex:e.tabindex}).addClass("cmd-clipboard").appendTo(i);return v.before('<label class="visually-hidden" for="'+s+'">Clipboard textarea for jQuery Terminal</label>'),{$node:v,val:function(_){return typeof _>"u"?v.val():v.val(_)}}}(),g.val(" ")),e.width&&i.width(e.width);var y,F,L,M,z,R=0,P,te=i.find(".cmd-prompt"),B=!1,E="",x=null,V,w="",ie,ue="",j=0,pe,se,Q=0,re,ee,Z=i.find(".cmd-cursor"),Fe,Pe,ke=0,Xe="\uFFFF",Me=/\uFFFF$/,Be=/^\uFFFF$/;function ve(s){var v=$(s.target);if(v.is("span,img,a"))return v=v.closest("[data-text]"),v.index()+v.parent("span").prevAll().find("[data-text]").length+v.closest('[role="presentation"]').prevUntil(".cmd-prompt").find("[data-text]").length;if(v.is('div[role="presentation"]')){var _=!v.next().length;return v.find("[data-text]").length+v.prevUntil(".cmd-prompt").find("[data-text]").length-(_?0:1)}}var bt={SPACEBAR:" ",UP:"ArrowUP",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",DEL:"Delete",MULTIPLY:"*",DIVIDE:"/",SUBTRACT:"-",ADD:"+"};function Ot(s){var v=s.key.toUpperCase();return bt[v]?bt[v]:v}function ir(s){if(s.key){var v=Ot(s).toUpperCase();if(v==="CONTROL")return"CTRL";var _=[];return s.ctrlKey&&_.push("CTRL"),s.metaKey&&v!=="META"&&_.push("META"),s.shiftKey&&v!=="SHIFT"&&_.push("SHIFT"),s.altKey&&v!=="ALT"&&_.push("ALT"),_.length&&v===" "&&(v="SPACEBAR"),s.key&&_.push(v),_.join("+")}}var We={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},ce;for(ce=1;ce<25;ce++)We[111+ce]="F"+ce;var Lt="";for(ce=65;ce<91;ce++)Lt=String.fromCharCode(ce),We[ce]=[Lt.toLowerCase(),Lt.toUpperCase()];var Ft={};Object.keys(We).forEach(function(s){is_array(We[s])?We[s].forEach(function(v){Ft[v.toUpperCase()]=s}):Ft[We[s].toUpperCase()]=s});var He,Dt={"ALT+D":ut({clipboard:!0}),"HOLD+ALT+D":ut({clipboard:!0,hold:!0}),"HOLD+DELETE":ut({clipboard:!1,hold:!0}),"HOLD+SHIFT+DELETE":ut({clipboard:!1,hold:!0}),ENTER:function(){ee&&w&&!e.mask&&(is_function(e.historyFilter)&&e.historyFilter(w)||e.historyFilter instanceof RegExp&&w.match(e.historyFilter)||!e.historyFilter)&&ee.append(w);var s=w;is_mobile||g.$node.blur(),ee.reset(),Ke="",d=!0;var v;return e.commands&&(v=e.commands.call(i,s)),is_function(pe)&&(v&&is_function(v.then)?v.then(function(){we()}):we()),i.set(""),g.val(""),is_mobile||g.$node.focus(),!1},"SHIFT+ENTER":function(){return i.insert(`
`),!0},BACKSPACE:jt,"SHIFT+BACKSPACE":jt,TAB:function(){i.insert("	")},"CTRL+D":function(){return i.delete(1),!1},DELETE:function(){return i.delete(1),!0},"HOLD+ARROWUP":Vt,ARROWUP:Vt,"CTRL+ARROWUP":wt,"CTRL+P":wt,ARROWDOWN:Yt,"HOLD+ARROWDOWN":Yt,"CTRL+N":$t,"CTRL+ARROWDOWN":$t,ARROWLEFT:mt,"HOLD+ARROWLEFT":debounce(mt,10),"CTRL+B":mt,"CTRL+ARROWLEFT":function(){var s=j-1,v=0;w[s]===" "&&--s;for(var _=s;_>0;--_)if(w[_]===" "&&w[_+1]!==" "){v=_+1;break}else if(w[_]===`
`&&w[_+1]!==`
`){v=_;break}i.position(v)},"CTRL+R":function(){return B?Ze(!0):(V=pe,ft(),ie=w,i.set(""),Ee(),B=!0),!1},"CTRL+G":function(){if(B)return pe=V,we(),i.set(ie),Ee(),B=!1,E="",!1},ARROWRIGHT:kt,"HOLD+ARROWRIGHT":debounce(kt,10),"CTRL+F":kt,"CTRL+ARROWRIGHT":function(){w[j]===" "&&++j;var s=/\S[\n\s]{2,}|[\n\s]+\S?/,v=w.slice(j).match(s);!v||v[0].match(/^\s+$/)?i.position(bare_text(w).length):v[0][0]!==" "?j+=v.index+1:(j+=v.index+v[0].length-1,v[0][v[0].length-1]!==" "&&--j),Ee()},F12:Ye,END:de(!0),"CTRL+END":de(),"CTRL+E":de(),HOME:At(!0),"CTRL+HOME":At(),"CTRL+A":At(),"SHIFT+INSERT":dt,"CTRL+SHIFT+T":Ye,"CTRL+W":at({clipboard:!0,hold:!1}),"CTRL+BACKSPACE":at({clipboard:!0,hold:!1}),"HOLD+BACKSPACE":at({clipboard:!1,hold:!0}),"HOLD+SHIFT+BACKSPACE":at({clipboard:!1,hold:!0}),"CTRL+H":function(){return w!==""&&j>0&&i.delete(-1),!1},"CTRL+X":Ye,"CTRL+C":function(){return get_selected_html()===""},"CTRL+T":Ye,"CTRL+Y":function(){ue!==""&&i.insert(ue)},"CTRL+V":dt,"META+V":dt,"CTRL+K":function(){var s=text(w).length;return s>j&&(ue=i.delete(s-j),text_to_clipboard(g.$node,ue)),!1},"CTRL+U":function(){return w!==""&&j!==0&&(ue=i.delete(-j),text_to_clipboard(g.$node,ue)),!1},"CTRL+TAB":function(){return!1},"META+`":Ye,"META+R":Ye,"META+L":Ye};function ut(s){return s=s||{},s.hold&&!e.mobileDelete?function(){return i.delete(1),!1}:function(){var _=/ *[^ ]+ *(?= )|[^ ]+$/,T=w.slice(j),q=T.match(_);return q&&(ue=q[0],s.clipboard&&text_to_clipboard(g.$node,ue)),i.set(w.slice(0,j)+w.slice(j).replace(_,""),!0),!1}}function at(s){return s=s||{},s.hold&&!e.mobileDelete?function(){i.delete(-1)}:function(){if(w!==""&&j!==0){var _=w.slice(0,j).match(/([^ ]* *$)/);_[0].length&&(ue=i.delete(-_[0].length),s.clipboard&&text_to_clipboard(g.$node,ue))}return!1}}function Ye(){return!0}function dt(){return g.val(""),ke=0,i.isenabled()&&!g.$node.is(":focus")&&g.$node.trigger("focus",[!0]),g.$node.one("input",Et),!0}function Et(){if(ke++>0)return;function s(){g.val(w),r()}function v(_){i.insert(_),s()}i.isenabled()&&i.oneTime(100,function(){var _=g.val().replace(/\r/g,"");if(is_function(e.onPaste)){var T=e.onPaste.call(i,{target:i,text:_});if(T!==undefined){T&&is_function(T.then||T.done)?(T.then||T.done).call(T,v):typeof T=="string"?v(T):T===!1&&s();return}}v(_)})}function wt(){return Ae?(ie=w,i.set(ee.current())):i.set(ee.previous()),Ae=!1,!1}function $t(){return ee.end()?(Ae=!0,i.set(ie)):i.set(ee.next()),!1}function ot(s){return s.match(/\n/)}function It(s,v){var _=s.split(`
`).map(function(q){return $.terminal.length(q)});v&&(_[0]+=v);var T=_.filter(function(q){return q>=y});return!!T.length}function Jt(s){var v=L,_=$.terminal.split_equal(v+s,y),T=new RegExp("^"+$.terminal.escape_regex(v));return _=_.map($.terminal.unescape_brackets),_[0]=_[0].replace(T,""),_}function Vt(){var s=$.terminal.substring(w,0,j),v=i.column(),_=i.find(".cmd-cursor-line"),T=_.prevUntil("span").length;if(T===1&&v<=P)return i.position(0),!1;if(T===0)return wt();if(ot(s)||It(s,P)){var q=_.prev(),J=q.is(".cmd-end-line"),ne=Jt(w);q=ne[T-1];var oe=ne[T].substring(v).length,G;return oe>0?(G=v,T-1===0&&(G-=P),G=v+q.substring(G).length,J&&++G):G=v+1,i.position(-G,!0),!1}else return wt()}function Yt(){var s=$.terminal.substring(w,j);if(ot(s)||It(s)){var v=Jt(w),_=i.column(),T=i.find(".cmd-cursor-line"),q=T.prevUntil("span"),J=q.length,ne=T.is(".cmd-end-line"),oe=T.next().is(".cmd-end-line"),G=v[J+1];if(!G)return $t();var fe=v[J].substring(_).length,le;return fe===0?(le=G.length,oe&&le++):(le=Math.min(_,G.length)+fe,J===0&&(le+=P),ne&&(le+=1)),i.position(le,!0),!1}else return $t()}function jt(){B?(E=E.slice(0,-1),ft()):w!==""&&j>0&&i.delete(-1),i.oneTime(1,function(){d=!0})}function mt(){j>0&&i.position(-1,!0)}function kt(){return j<bare_text(w).length&&i.position(1,!0),!1}function At(s){function v(){i.position(0)}return s?function(){if(w.match(/\n/)){var _=w.substring(0,i.position());i.position(_.lastIndexOf(`
`)+1)}else v()}:v}function de(s){function v(){i.position(text(w).length)}return s?function(){if(w.match(/\n/)){for(var _=w.split(`
`),T=i.position(),q=0,J=0;J<_.length;++J)if(q+=_[J].length,q>T){i.position(q+J);return}}v()}:v}function Qt(){var s=g.$node,v=s.is(":focus");se?i.oneTime(10,function(){!s.is(":focus")&&se&&s.trigger("focus",[!0])}):v&&!se&&s.trigger("blur",[!0])}function Gt(){if(animation_supported){var s=window.getComputedStyle(Z[0]),v=s.getPropertyValue("--animation");v=v.replace(/^\s*|\s*$/g,"");var _=i.attr("class");if(_.match(/-animation/)&&(_=_.replace(/[a-z]+-animation/g,"")),v&&!v.match(/blink/)){var T=v.replace(/terminal-/,"")+"-animation";_.match(T)||(_+=" "+T)}_=_.replace(/\s+/g," "),_!==i.attr("class").replace(/\s+/g," ")&&i.attr("class",_)}}function r(s){i.isenabled()&&i.oneTime(10,function(){!is_mobile&&g.val()!==w&&!s&&g.val(" "+w),se&&i.oneTime(10,function(){try{var v=is_mobile?j:j+1;g.$node.caret()!==v&&g.$node.caret(v)}catch{}})})}if(animation_supported&&!is_android)Fe=function(s){s?Z.addClass("cmd-blink"):Z.removeClass("cmd-blink")},Pe=function(){var s=Z.clone();s.insertBefore(Z),Z.remove(),Z=s};else{var st=!1;Fe=function(s){s&&!st?(st=!0,Z.addClass("cmd-inverted cmd-blink"),i.everyTime(500,"blink",Bt)):st&&!s&&(st=!1,i.stopTime("blink",Bt),Z.removeClass("cmd-inverted cmd-blink"))},Pe=function(){Fe(!1),Fe(!0)}}function Bt(){Z.toggleClass("cmd-inverted")}function ft(){pe="(reverse-i-search)`"+E+"': ",we()}function ur(){pe=V,B=!1,x=null,E=""}function Ze(s){var v=ee.data(),_,T,q=v.length;if(s&&x>0&&(q-=x),E.length>0)for(var J=E.length;J>0;J--){T=$.terminal.escape_regex(E.slice(0,J)),e.caseSensitiveSearch?_=new RegExp(T):_=new RegExp(T,"i");for(var ne=q;ne--;)if(_.test(v[ne])){x=v.length-ne,i.position(v[ne].indexOf(T)),i.set(v[ne],!0),Ee(),E.length!==J&&(E=E.slice(0,J),ft());return}}E=""}function ht(){var s=i.find(".cmd-prompt"),v=s.html();s.html("<span>&nbsp;</span>");var _=s.find("span").get(0).getBoundingClientRect().width;return s.html(v),_}function et(s){var v=i.width();return Math.floor(v/s)}function tt(s){function v(a){return $.terminal.split_equal(a,y)}function _(a){var o=[];return a.forEach(function(l,c){$.terminal.strip(l).match(Be)?(o[c]=!1,c>0&&(o[c-1]+=Xe)):o[c]=a[c]}),o.filter(function(l){return l!==!1})}var T=te.find(".cmd-line"),q;T.length?q=T.nextUntil(".cmd-line").text():q=te.text(),q=q.replace("\u200B",""),q=$.terminal.escape_brackets(q);var J=Tt(),ne=new RegExp("^"+J+$.terminal.escape_regex(q)),oe;if(s.match(/\n/)){for(var G=s.split(`
`),fe=y-P-1,le=0;le<G.length-1;++le)G[le]+=Xe;for(strlen(G[0])>fe?(oe=v(q+G[0]),oe[0]=oe[0].replace(ne,""),oe=_(oe)):oe=[G[0]],le=1;le<G.length;++le)if(strlen(G[le])>y){var ge=v(G[le]);le<G.length-1&&(ge=_(ge)),oe=oe.concat(ge)}else oe.push(G[le])}else oe=v(J+q+s,y),oe[0]=oe[0].replace(ne,"");if(oe.length>1){var n=$.terminal.length(oe[oe.length-1]);n===y&&oe.push("")}return oe}var vt=new WorkerCache({validation:function(s){var v=!1;return(!this._previous_value||this._previous_value===s)&&(!this._cols||this._cols===y)&&(v=!0),this._previous_value=s,this._cols=y,v},action:tt});function qe(s){return vt.get(s)}function rt(s,v){try{s=$.terminal.escape_formatting(s);var _=$.extend({},e,{unixFormattingEscapeBrackets:!0,position:j,command:!0}),T=$.terminal.apply_formatters(s,_),q=$.terminal.normalize(T[0]),J=$.terminal.length(q);return v||(Q=T[1],Q>J&&(Q=J)),q}catch(ne){return alert_exception("[Formatting]",ne.stack),s}}function Je(s,v){var _=$.terminal.encode(Ue(s),{tabs:e.tabs,before:v});return $.terminal.format(_,{charWidth:e.charWidth,allowedAttributes:e.allowedAttributes||[]})}function Ue(s){return $.terminal.partition(s).join("")}function ze(s,v){return $.terminal.length(s,v)}function _t(s){var v=strlen(text(s));return v>0&&v>y-P-1||s.match(/\n/)}function gt(s,v,_){return $.terminal.substring(s,v,_)}function Pt(s){return $.terminal.is_formatting(s)?s.replace(format_parts_re,"$4").match(/^emoji /):!1}var Ee=function(){var s=Z.prev(),v=Z.next(),_=Z.parent();function T(G,fe){var le=G.match(Me);le&&(G=G.replace(Me," ")),_.toggleClass("cmd-end-line",!!le);var ge=!1,n=$.extend({prompt:"",last:!1},fe),a=n.position,o=ze(G),l=n.prompt,c;if(a===o)s.html(Je(G)),c="&nbsp;",J(),v.html("");else if(a===0)s.html(""),c=gt(G,0,1),Z.html(Je(c)),v.html(Je(gt(G,1),l+c));else{var C=$.terminal.substring(G,0,a);s.html(Je(C,l)),c=gt(G,a,a+1);var k=(l+C).replace(/^.*\t/,"");Z.html(Je(c,k)),a===o-1?(ge=!0,v.html("")):(c.match(/\t/)?k="":k+=c,v.html(Je(gt(G,a+1),k)))}if(ch_unit_bug)if(typeof wcwidth<"u"){var S=strlen(text(c));S===1&&Pt(c)&&(S=2),Z.width(F*S)}else Z.width(F);Z.toggleClass("cmd-end-line",ge),Gt();var O=$.terminal.length(Z.text());if(O>1){var A=Z.find("[data-text]")[0];A.style.setProperty("--length",O)}Pe()}function q(G,fe){var le=G.match(Me),ge='<div role="presentation" aria-hidden="true"';return le&&(G=G.replace(Me," "),ge+=' class="cmd-end-line"'),ge+=">"+Je(G,fe||"")+"</div>",ge}function J(){Z.html('<span data-text class="end"><span>&nbsp;<span></span>')}function ne(G){var fe=_;$.each(G,function(le,ge){fe=$(q(ge)).insertAfter(fe)})}function oe(G){$.each(G,function(fe,le){_.before(q(le,fe===0?M:""))})}return function(){var G;switch(typeof e.mask){case"boolean":G=e.mask?w.replace(/./g,"*"):w;break;case"string":G=w.replace(/./g,e.mask);break}var fe=rt(G),le;ze(fe)===text(G).length?le=j:le=Q;var ge;if(p.css({display:"none"}),p.find("div:not(.cmd-cursor-line)").remove(),s.html(""),_t(fe)){var n=fe.match(/\t/g),a=fe;n&&(fe=fe.replace(/\t/g,"\0\0\0\0"));var o=qe(fe);n&&(o=$.map(o,function(b){return b.replace(/\x00\x00\x00\x00/g,"	")}));var l=ze(o[0]);if(!(l===0&&o.length===1))if(le<l)T(o[0],{length:o.length,position:le,prompt:M}),ne(o.slice(1));else if(le===l)_.before(q(o[0],M)),T(o[1]||"",{length:o.length,position:0,last:o.length<=2}),o.length>2&&ne(o.slice(2));else{var c=o.slice(-1)[0],C=ze(a),k=C-le,S=ze(c),O=0;if(k===-1&&(k=0),k<=S)oe(o.slice(0,-1)),S===k?O=0:O=S-k,T(c,{length:o.length,position:O,last:!0});else{var A,H;for(O=le,ge=0;ge<o.length;++ge){var I=$.terminal.length(o[ge]);if(O>I)O-=I;else break}if(H=o[ge],A=ge,O===ze(H)&&(O=0,H=o[++A],H===undefined)){var Y=$.terminal.defaults.strings.redrawError;throw new Error(Y)}T(H,{length:o.length,position:O}),oe(o.slice(0,A)),ne(o.slice(A+1))}}i.find(".cmd-cursor-line ~ div:last-of-type").append("<span></span>")}else fe===""?(s.html(""),J(),v.html("")):T(fe,{length:1,position:le});var ae=_.prevUntil(".cmd-prompt").length;is_css_variables_supported?i[0].style.setProperty("--cursor-line",ae):g.$node.css("top",ae*14+"px"),p.css({display:""})}}(),zt=function(){function s(_,T){var q=$.extend({},e,{position:T,command:!0});return $.terminal.apply_formatters(_,q)[1]}function v(_,T,q){var J=s(q,T);if(J===_){var ne=s(q,T+1);return ne>_?0:1}else return J<_?1:-1}return function(_,T){if(T===0)return 0;_=bare_text(_);var q=_.length,J=$.terminal.escape_brackets(w),ne=binary_search(0,q,T,v,[J]),oe=$.terminal.split_characters(_);if(q>oe.length){for(var G=0,fe=0;fe<oe.length;++fe)if(G+=oe[fe].length,G>=ne)return G}return ne}}();function Tt(){return R?new Array(R+1).join("\uFFFF"):""}var $e,we=function(){function s(_){if(!_)return z=0,P=R,_;var T=Tt(),q=T+_,J=$.terminal.split_equal(q,y);J=J.map(function(fe){return fe.replace(/^\uFFFF+/,"")}),J=J.map(function(fe){return $.terminal.have_formatting(fe)?$.terminal.format_split(fe).map(function(le){return $.terminal.is_formatting(le)?le:"[[;;]"+$.terminal.escape_brackets(le)+"]"}).join(""):"[[;;]"+$.terminal.escape_brackets(fe)+"]"});var ne={charWidth:e.charWidth};M=J[J.length-1];var oe=$.terminal.encode(J[J.length-1],{tabs:e.tabs}),G=$.terminal.format(oe,ne);return z=strlen(text(oe)),P=z+R,J.slice(0,-1).map(function(fe){return fe=$.terminal.encode(fe,{tabs:e.tabs}),'<span class="cmd-line">'+$.terminal.format(fe,ne)+"</span>"}).concat([G]).join(`
`)}function v(_,T){_&&((T&&T.formatters||!T)&&(_=$.terminal.apply_formatters(_,{prompt:!0}),_=$.terminal.normalize(_)),_=crlf(_));var q=s(_);if(L=_,q=q||$.terminal.format("[[;;]\u200B]"),te.html()!==q){te.html(q);var J=te.find("> span span");g.$node.attr("data-cmd-prompt",te.text()),is_ch_unit_supported&&(te.hide(),J.each(function(){var ne=$(this),oe=strlen(ne.text());oe===0?ne.css("width",1):ne.css("width",oe+"ch")}),te.show())}}return function(_){$e&&$e.set&&($e.set=$.noop,$e=null);var T=$e={set:v};with_prompt(pe,function(q){T.set(q,_)},i)}}();function yt(){is_function(e.onCommandChange)&&e.onCommandChange.call(i,w)}function Ct(s,v,_){var T=s.substring(0,v);if(v===0||!s.length)return 0;var q=/\n?([^\n]*)$/,J=T.match(q),ne=J[1].length;return!ot(T)&&(_||It(T,P))&&(ne+=P),ne===0?ne:(ne%=y,ne===0?y:ne)}$.extend(i,{option:function(s,v){return typeof v>"u"?e[s]:(e[s]=v,i)},name:function(s){if(s!==undefined){re=s;var v=ee&&ee.enabled()||!ee;return ee=new History(re,e.historySize,e.history==="memory"),v||ee.disable(),i}else return re},purge:function(){return ee.clear(),i},history:function(){return ee},delete:function(s,v){var _,T;return s===0?"":(s<0?j>0&&(_=w.slice(0,j).slice(s),T=bare_text(w),T=T.slice(0,j+s)+T.slice(j,T.length),v||i.position(j+s)):w!==""&&(T=text(w),j<T.length&&(_=T.slice(j).slice(0,s),T=T.slice(0,j)+T.slice(j+s,T.length))),_&&(w=T),Ee(),r(),yt(),_)},set:function(s,v,_){if(s!==undefined){var T=s!==w;w=s,v||i.position(bare_text(w).length),Ee(),r(),!_&&T&&yt()}return i},keymap:function(s,v){function _(T,q){var J=Dt[T];return is_function(J)&&(J=J.bind(i)),function(ne){return q.call(i,ne,J)}}if(s===null)return He=Dt,i;if(typeof s>"u")return He;if(typeof s=="string")if(typeof v>"u"){if(He[s])return He[s];if(Dt[s])return Dt[s]}else He[s]=_(s,v);else return He=$.extend({},He||Dt,$.omap(s||{},_)),i},insert:function(s,v){var _=bare_text(w),T=bare_text(s).length;return j===_.length?s=_+s:j===0?s=s+_:s=_.slice(0,j)+s+_.slice(j),w=s,v||i.position(T,!0,!0),r(),Ee(),yt(),i},get:function(){return w},commands:function(s){return s&&(e.commands=s,i)},destroy:function(){return Ie.unbind("keypress.cmd",Mt),Ie.unbind("keydown.cmd",pt),Ie.unbind("input.cmd",Se),i.stopTime("blink",Bt),i.find(".cmd-wrapper").remove(),i.find(".cmd-prompt, .cmd-clipboard, .cmd-editable").remove(),i.removeClass("cmd").removeData("cmd").off(".cmd"),i},display_column:function(s){var v=rt(w);return v=$.terminal.strip(v),Ct(v,Q,s)},column:function(s){return Ct(w,j,s)},line:function(){var s=w.substring(0,j);return j===0||!w.length?0:s.split(/\n/).length-1},__set_prompt_margin:function(s){R=s,P=z+R},prompt:function(s,v){if(s===!0)return L;if(s===undefined)return pe;var _=s!==pe;if(typeof s=="string"||typeof s=="function")pe=s;else throw new Error("prompt must be a function or string");return _&&(we(v),Ee()),i},kill_text:function(){return ue},position:function(s,v,_){if(typeof s=="number"){var T=j,q=bare_text(w).length;return v?j+=s:s<0?j=0:s>q?j=q:j=s,T!==j&&(Ee(),!_&&is_function(e.onPositionChange)&&e.onPositionChange(j,Q),r(!0)),i}else return j},refresh:function(){return we(),Ee(),r(!0),i},display_position:function(s,v){if(s===undefined)return Q;var _=rt($.terminal.escape_formatting(w),!0),T=ze(_),q=bare_text(w).length,J;if(v?J=Q+s:s>T?J=T:J=s,T===q)return Q=J,i.position(J);if(T===J)return Q=J,i.position(q);var ne=zt(w,J);return ne!==-1&&(Q=J,i.position(ne)),i},visible:function(){var s=i.visible;return function(){return s.apply(i,[]),Ee(),we(),i}}(),show:function(){var s=i.show;return function(){return s.apply(i,[]),Ee(),we(),i}}(),resize:function(s){F=ht();var v;return typeof s=="number"?v=s:v=et(F),(y!==v||arguments[0]===!0)&&(y=v,we(),Ee()),i},clear_cache:"Map"in root?function(){vt.clear()}:function(){return i},invoke_key:function(s){se||warn('invoke_key("'+s+'") called on disabled terminal');var v=s.toUpperCase().split("+"),_=v.pop(),T=v.indexOf("CTRL")!==-1,q=v.indexOf("SHIFT")!==-1,J=v.indexOf("ALT")!==-1,ne=v.indexOf("META")!==-1,oe=$.Event("keydown",{ctrlKey:T,shiftKey:q,altKey:J,metaKey:ne,which:Ft[_],key:_}),G=$(document.documentElement||window);return G.trigger(oe),oe=$.Event("keypress"),oe.key=_,oe.which=oe.keyCode=0,G.trigger(oe),i},clip:function(){return g},enable:function(s){if(!se){se=!0,i.addClass("enabled");try{g.$node.is(":focus")||g.$node.focus(),g.$node.caret(j)}catch{}Fe(!0),!s&&is_function(pe)&&we(),Gt(),r()}return Qt(),i},isenabled:function(){return se},disable:function(s){return se=!1,i.removeClass("enabled"),Fe(!1),s||Qt(),i},mask:function(s){return typeof s>"u"?e.mask:(e.mask=s,Ee(),i)}}),i.name(e.name||e.prompt||""),F=ht(),y=et(F),e.prompt!==!1&&(pe=e.prompt,we()),e.enabled===!0&&i.enable(),e.history||ee.disable();var Ae=!0,St=!1,nt=!1,lt=!1,Qe=!1,ct=!1,d=!0,Ne=!1,Oe=!1,ye=!1,be=!1,Ce,Ke="",Te;function Nt(s){return s.key.toUpperCase()==="BACKSPACE"||s.which===8}function me(s){return s.key&&s.key.length===1&&!s.ctrlKey}function U(s){var v=["HOLD+SHIFT+BACKSPACE","HOLD+BACKSPACE"];return v.indexOf(s)!==-1&&e.mobileDelete||e.repeatTimeoutKeys.indexOf(s)!==-1}function Xt(s){return s.which===35||s.which===36||s.which===37||s.which===38||s.which===39||s.which===40||s.which===13||s.which===27}var Le=!1;function pt(s){""+s.key+s.fake+s.which;var v;Oe=(s.key||"").toLowerCase()==="process"||s.which===0,nt=Qe&&lt&&!Nt(s);try{s.fake||(lt=me(s),ct=String(s.key).toLowerCase()==="unidentified",Ne=Nt(s))}catch{}if(s.key==="Unidentified"){d=!0;return}!s.fake&&["meta","os"].indexOf(s.key.toLowerCase())===-1&&(d=!1),Qe=!0,g.$node.off("input",Et);var _=ir(s);if(is_function(e.keydown)&&(s.key=Ot(s),v=e.keydown.call(i,s),v!==undefined))return v||(Ce=!0),v;if(_!==Te&&he(),se||_==="CTRL+C"&&is_terminal_selected(i)){if(ye){if(Te=_,_="HOLD+"+_,be)return;e.holdRepeatTimeout>0&&U(_)&&(be=!0,i.oneTime(e.holdRepeatTimeout,"delay",function(){be=!1}))}else i.oneTime(e.holdTimeout,"hold",function(){ye=!0}),Te=_;if(!s.fake&&is_android){if(Le)return he(),Le=!1,!1;u(_)?Le=!0:u(Te)&&(Le=!1)}if(Pe(),Ce=["CTRL+V","META+V"].indexOf(_)!==-1,_.toLowerCase()==="enter"&&(Ae=!0),B&&Xt(s))ur(),we(),s.which===27&&i.set(""),Ee(),s.which===13&&pt.call(this,s);else if(is_function(He[_])){if(v=He[_](s),v===!0)return;if(v!==undefined)return v}else{if(s.altKey)return;St=!1;return}}}function he(){i.stopTime("hold"),i.stopTime("delay"),be=ye=!1}var Ie=$(document.documentElement||window);i.keymap(e.keymap||{});function Mt(s){""+s.key+s.fake,he();var v;if(s.fake||(Qe=!1),!((s.ctrlKey||s.metaKey)&&!s.altKey)&&!St){if(is_function(e.keypress)&&(v=e.keypress.call(i,s),v!==undefined))return v||(Ce=!0),v;if(se){if(s.fake)return;var _;if(is_key_native){_=s.key;var T=_.toUpperCase();bt[T]&&(_=bt[T])}if((!_||ct)&&(_=String.fromCharCode(s.which)),$.inArray(s.which,[13,0,8])>-1)return s.keyCode===123?void 0:!1;_&&(!s.ctrlKey||s.ctrlKey&&s.ctrlKey)&&(!(s.altKey&&s.which===100)||s.altKey)&&!nt&&(B?(E+=_,Ze(),ft()):_.length===1&&i.insert(_))}}}function xt(s,v,_){var T=$.Event(s);T.which=_,T.key=v,T.fake=!0,Ie.trigger(T)}var Ve=!1;function je(){Ke=w,Ce=!1,d=!0}function Se(){""+d+Oe+Qe+nt+Ce+lt+ct+Ne;var s=g.val();if(is_mobile||(s=s.replace(/^ /,"")),d||Oe||(Qe||nt)&&!Ce&&(lt||ct)&&!Ne){if(s&&s===w){is_android&&d&&xt("keydown","Enter",13),je();return}var v=j;if(d){var _=Ke;Ne=_.slice(0,_.length-1).length===s.length}if(Ve){Ve=!1,g.val(w);return}if(B)E=s,Ze(),ft();else{var T=s.slice(j);if(T.length===1||Ne){var q=get_next_character(T);if(u(q)&&(Ve=!0),d){var J;Ne?J=8:J=T.toUpperCase().charCodeAt(0),xt("keydown",Ne?"Backspace":T,J)}Qe&&!Ne&&xt("keypress",q,T.charCodeAt(0))}if(Ne){Ke=w;return}if(Ce){Ce=!1;return}i.set(s)}Ne?i.position(v-1):i.position(v+Math.abs(s.length-Ke.length))}je()}return Ie.bind("keypress.cmd",Mt),Ie.bind("keydown.cmd",pt),Ie.bind("keyup.cmd",he),Ie.bind("input.cmd",Se),function(){if(is_mobile){$(i[0]).add(g.$node).on("touchstart.cmd",function(){i.isenabled()?g.blur():g.focus()}),i.disable();return}var s=!1,v=0;i.on("mousedown.cmd",function(){s=!0}).on("mouseup.cmd",function(_){function T(){var oe=$(_.target),G=oe.is(".cmd-prompt");!G&&ne&&get_selected_html()===""&&se&&(oe.is(".cmd")?i.position(text(w).length):i.display_position(ve(_))),v=0}var q;if(_.originalEvent===undefined?q=_.button:q=_.originalEvent.button,q===0&&get_selected_html()===""){var J="click_"+D;if(++v===1){var ne=s;se?e.clickTimeout===0?T():i.oneTime(e.clickTimeout,J,T):v=0}else i.stopTime(J),v=0}s=!1})}(),i.data("cmd",i),"KeyboardEvent"in window&&"key"in window.KeyboardEvent.prototype||setTimeout(function(){throw new Error("key event property not supported try https://github.com/inexorabletash/polyfill/blob/master/keyboard.js")},0),i};var strlen=function(){return typeof wcwidth>"u"?function(t){return t=t.replace(/\u200B/g,""),$.terminal.length(t)}:wcwidth}();function count_selfclosing_formatting(t){var e=0;if($.terminal.have_formatting(t)){var u=new RegExp(format_parts_re.source,"i");$.terminal.format_split(t).forEach(function(i){if($.terminal.is_formatting(i)){var f=i.match(u);f&&f[1].match(/@/)&&f[6]===""&&e++}})}return e}var entities={"&amp;":"&","&lt;":"<","&gt;":">","&Agrave;":"\xC0","&Aacute;":"\xC1","&Acirc;":"\xC2","&Atilde;":"\xC3","&Auml;":"\xC4","&Aring;":"\xC5","&AElig;":"\xC6","&Ccedil;":"\xC7","&Egrave;":"\xC8","&Eacute;":"\xC9","&Ecirc;":"\xCA","&Euml;":"\xCB","&Igrave;":"\xCC","&Iacute;":"\xCD","&Icirc;":"\xCE","&Iuml;":"\xCF","&ETH;":"\xD0","&Ntilde;":"\xD1","&Ograve;":"\xD2","&Oacute;":"\xD3","&Ocirc;":"\xD4","&Otilde;":"\xD5","&Ouml;":"\xD6","&Oslash;":"\xD8","&Ugrave;":"\xD9","&Uacute;":"\xDA","&Ucirc;":"\xDB","&Uuml;":"\xDC","&Yacute;":"\xDD","&THORN;":"\xDE","&szlig;":"\xDF","&agrave;":"\xE0","&aacute;":"\xE1","&acirc;":"\xE2","&atilde;":"\xE3","&auml;":"\xE4","&aring;":"\xE5","&aelig;":"\xE6","&ccedil;":"\xE7","&egrave;":"\xE8","&eacute;":"\xE9","&ecirc;":"\xEA","&euml;":"\xEB","&igrave;":"\xEC","&iacute;":"\xED","&icirc;":"\xEE","&iuml;":"\xEF","&eth;":"\xF0","&ntilde;":"\xF1","&ograve;":"\xF2","&oacute;":"\xF3","&ocirc;":"\xF4","&otilde;":"\xF5","&ouml;":"\xF6","&oslash;":"\xF8","&ugrave;":"\xF9","&uacute;":"\xFA","&ucirc;":"\xFB","&uuml;":"\xFC","&yacute;":"\xFD","&thorn;":"\xFE","&yuml;":"\xFF","&nbsp;":"\xA0","&iexcl;":"\xA1","&cent;":"\xA2","&pound;":"\xA3","&curren;":"\xA4","&yen;":"\xA5","&brvbar;":"\xA6","&sect;":"\xA7","&uml;":"\xA8","&copy;":"\xA9","&ordf;":"\xAA","&laquo;":"\xAB","&not;":"\xAC","&shy;":"\xAD","&reg;":"\xAE","&macr;":"\xAF","&deg;":"\xB0","&plusmn;":"\xB1","&sup2;":"\xB2","&sup3;":"\xB3","&acute;":"\xB4","&micro;":"\xB5","&para;":"\xB6","&cedil;":"\xB8","&sup1;":"\xB9","&ordm;":"\xBA","&raquo;":"\xBB","&frac14;":"\xBC","&frac12;":"\xBD","&frac34;":"\xBE","&iquest;":"\xBF","&times;":"\xD7","&divide;":"\xF7","&forall;":"\u2200","&part;":"\u2202","&exist;":"\u2203","&empty;":"\u2205","&nabla;":"\u2207","&isin;":"\u2208","&notin;":"\u2209","&ni;":"\u220B","&prod;":"\u220F","&sum;":"\u2211","&minus;":"\u2212","&lowast;":"\u2217","&radic;":"\u221A","&prop;":"\u221D","&infin;":"\u221E","&ang;":"\u2220","&and;":"\u2227","&or;":"\u2228","&cap;":"\u2229","&cup;":"\u222A","&int;":"\u222B","&there4;":"\u2234","&sim;":"\u223C","&cong;":"\u2245","&asymp;":"\u2248","&ne;":"\u2260","&equiv;":"\u2261","&le;":"\u2264","&ge;":"\u2265","&sub;":"\u2282","&sup;":"\u2283","&nsub;":"\u2284","&sube;":"\u2286","&supe;":"\u2287","&oplus;":"\u2295","&otimes;":"\u2297","&perp;":"\u22A5","&sdot;":"\u22C5","&Alpha;":"\u0391","&Beta;":"\u0392","&Gamma;":"\u0393","&Delta;":"\u0394","&Epsilon;":"\u0395","&Zeta;":"\u0396","&Eta;":"\u0397","&Theta;":"\u0398","&Iota;":"\u0399","&Kappa;":"\u039A","&Lambda;":"\u039B","&Mu;":"\u039C","&Nu;":"\u039D","&Xi;":"\u039E","&Omicron;":"\u039F","&Pi;":"\u03A0","&Rho;":"\u03A1","&Sigma;":"\u03A3","&Tau;":"\u03A4","&Upsilon;":"\u03A5","&Phi;":"\u03A6","&Chi;":"\u03A7","&Psi;":"\u03A8","&Omega;":"\u03A9","&alpha;":"\u03B1","&beta;":"\u03B2","&gamma;":"\u03B3","&delta;":"\u03B4","&epsilon;":"\u03B5","&zeta;":"\u03B6","&eta;":"\u03B7","&theta;":"\u03B8","&iota;":"\u03B9","&kappa;":"\u03BA","&lambda;":"\u03BB","&mu;":"\u03BC","&nu;":"\u03BD","&xi;":"\u03BE","&omicron;":"\u03BF","&pi;":"\u03C0","&rho;":"\u03C1","&sigmaf;":"\u03C2","&sigma;":"\u03C3","&tau;":"\u03C4","&upsilon;":"\u03C5","&phi;":"\u03C6","&chi;":"\u03C7","&psi;":"\u03C8","&omega;":"\u03C9","&thetasym;":"\u03D1","&upsih;":"\u03D2","&piv;":"\u03D6","&OElig;":"\u0152","&oelig;":"\u0153","&Scaron;":"\u0160","&scaron;":"\u0161","&Yuml;":"\u0178","&fnof;":"\u0192","&circ;":"\u02C6","&tilde;":"\u02DC","&ensp;":"\u2002","&emsp;":"\u2003","&thinsp;":"\u2009","&zwnj;":"\u200C","&zwj;":"\u200D","&lrm;":"\u200E","&rlm;":"\u200F","&ndash;":"\u2013","&mdash;":"\u2014","&lsquo;":"\u2018","&rsquo;":"\u2019","&sbquo;":"\u201A","&ldquo;":"\u201C","&rdquo;":"\u201D","&bdquo;":"\u201E","&dagger;":"\u2020","&Dagger;":"\u2021","&bull;":"\u2022","&hellip;":"\u2026","&permil;":"\u2030","&prime;":"\u2032","&Prime;":"\u2033","&lsaquo;":"\u2039","&rsaquo;":"\u203A","&oline;":"\u203E","&euro;":"\u20AC","&trade;":"\u2122","&larr;":"\u2190","&uarr;":"\u2191","&rarr;":"\u2192","&darr;":"\u2193","&harr;":"\u2194","&crarr;":"\u21B5","&lceil;":"\u2308","&rceil;":"\u2309","&lfloor;":"\u230A","&rfloor;":"\u230B","&loz;":"\u25CA","&spades;":"\u2660","&clubs;":"\u2663","&hearts;":"\u2665","&diams;":"\u2666"};function render_entities(t){return t.replace(/&#(x?)([0-9]+);/g,function(e,u,i){return i=parseInt(i,u?16:10),String.fromCharCode(i)}).replace(/(&[^;]+;)/g,function(e,u){return entities[u]||u})}function bare_text(t){return t.match(/&/)?render_entities(safe(t)):t}function text(t){return bare_text($.terminal.strip(t))}function safe(t){return t.match(/[<>&]/)?t.replace(/&(?![^;]+;)/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;"):t}function crlf(t){return t.replace(/\r/g,"")}function char_len(t){return entity_re.test(t)?1:t.length}function make_re_fn(t){return function(u){var i=u.match(t);if(starts_with(i))return i[1]}}function starts_with(t){return t&&t.index===0}function is_simple_text(t){for(var e=[entity_re,emoji_re,combine_chr_re,astral_symbols_re],u=0;u<e.length;++u)if(e[u].test(t))return!1;return!0}function make_next_char_fun(t){var e=[];return[entity_re,emoji_re,combine_chr_re].forEach(function(u){u.test(t)&&e.push(make_re_fn(u))}),astral_symbols_re.test(t)&&e.push(function(i){var f=i.match(astral_symbols_re);if(starts_with(f)){var D=i.match(combine_chr_re);return D&&D.index===1?i.slice(0,3):f[1]}}),function(i){for(var f=0;f<e.length;++f){var D=e[f],p=D(i);if(p)return p}return i[0]}}function get_next_character(t){var e=t.match(entity_re);if(starts_with(e))return e[1];var u=t.match(combine_chr_re);if(starts_with(u))return u[1];var i=t.match(emoji_re);if(starts_with(i))return i[1];if(t.charCodeAt(0)<255)return t[0];var f=t.match(astral_symbols_re);return starts_with(f)?(u=t.match(combine_chr_re),u&&u.index===1?t.slice(0,3):t.slice(0,2)):t[0]}function normalize_position(t,e){if(e===0)return e;t=$.terminal.strip(t);var u=$.terminal.split_characters(t).reduce(function(i,f){if(typeof i=="number")return i;var D=i.length+char_len(f);return D>=e?i.position+1:{position:i.position+1,length:D}},{position:0,length:0});return typeof u=="number"?u:u.position}function style_to_string(t){return Object.keys(t).map(function(e){return e+":"+t[e]}).join(";")}function escape_html_attr(t){return t.replace(/"/g,"&quot;")}function char_width_object(t,e){var u={};return t===0?u.width="1px":is_ch_unit_supported?u.width=t+"ch":is_css_variables_supported?u["--length"]=t:e.charWidth&&(u.width=e.charWidth*t+"px"),u}function char_width_prop(t,e){return style_to_string(char_width_object(t,e))}function extra_css(t,e){if(typeof wcwidth<"u"){var u=bare_text(t),i=strlen(u);if(i>1&&i!==$.terminal.length(u))return char_width_object(i,e)}}function wide_characters(t,e){if(typeof wcwidth<"u"){var u=bare_text(t),i=$.terminal.split_characters(u);if(i.length===1)return t;var f=i.map(function(h){return{len:strlen(h),chr:h}}).reduce(function(h,g){var y=h[h.length-1];return y?y.len!==g.len?h.concat([{sum:g.len,len:g.len,specs:[g]}]):(h.pop(),h.concat([{sum:y.sum+g.len,len:y.len,specs:y.specs.concat(g)}])):[{sum:g.len,specs:[g],len:g.len}]},[]);return f.map(function(h){if(h.len===1)return D(h);var g=char_width_prop(h.sum,e);return h.sum===i.length||!g.length?"<span>"+D(h)+"</span>":h.specs.length>1?p(g,h.specs.map(function(y){return p(char_width_prop(y.len),y.chr)}).join("")):p(g,D(h))}).join("")}function D(h){return h.specs.map(function(g){return g.chr}).join("")}function p(h,g){return'<span style="'+h+'">'+g+"</span>"}return t}function binary_search(t,e,u,i,f){var D=e-t,p=t+Math.floor(D/2),h=[u,p].concat(f),g=i.apply(null,h);return g===0?p:g>0&&D>1?binary_search(p,e,u,i,f):g<0&&D>1?binary_search(t,p,u,i,f):-1}function is_terminal_selected(t){if(is_function(window.getSelection)){var e=window.getSelection();if(e.toString()){var u=e.getRangeAt(0).startContainer.parentNode,i=$(u).closest(".terminal");return i.length&&(t&&i.find(".cmd").is(t)||!t)}}}function get_selected_html(){var t="";if(is_function(window.getSelection)){var e=window.getSelection();if(e.rangeCount){for(var u=document.createElement("div"),i=0,f=e.rangeCount;i<f;++i)u.appendChild(e.getRangeAt(i).cloneContents());t=u.innerHTML}}return t}function with_selection(t){var e="",u=[];if(is_function(window.getSelection)){var i=window.getSelection();if(i.rangeCount){for(var f=document.createElement("div"),D=0,p=i.rangeCount;D<p;++D){var h=i.getRangeAt(D).cloneRange();u.push(h),f.appendChild(h.cloneContents())}e=f.innerHTML}}return t(e),u.length&&(i.removeAllRanges(),u.forEach(function(g){i.addRange(g)})),e!==""}function process_selected_line(){var t=$(this),e=t.text();return t.hasClass("cmd-end-line")&&(e+=`
`),e}function process_div(t){return $(t).find("> div, > span").map(process_selected_line).get().join(`
`).replace(/\n$/,"")}function process_selected_html(t){var e,u="",i=$("<div>"+t+"</div>");t.match(/<\/div>/)&&(e=i.find("div[data-index]").map(function(){return process_div(this)}).get().join(`
`),!e&&t.match(/style="width: 100%;?"/)&&(e=process_div(i)),u=e);var f=i.find(".cmd-prompt");f.length&&(u.length&&(u+=`
`),u+=f.text());var D=i.find('[role="presentation"]');return D.length&&(u+=D.map(process_selected_line).get().join("")),!u.length&&t&&(u=i.text()),u.replace(/\xA0/g," ")}var support_copy=function(){return typeof document>"u"||!is_function(document.queryCommandSupported)?!1:document.queryCommandSupported("copy")}(),text_to_clipboard;support_copy?text_to_clipboard=function(e,u){var i=e.val(),f=e.is(":focus"),D=e.caret();if(window.navigator&&window.navigator.clipboard)navigator.clipboard.writeText(u);else if(f)e.val(u).focus(),e[0].select(),document.execCommand("copy"),e.val(i),e.caret(D);else{var p=$("<textarea/>").css({position:"fixed",top:0,left:0}).appendTo("body");p.val(u).focus(),p[0].select(),document.execCommand("copy"),p.blur(),p.remove()}return!0}:text_to_clipboard=$.noop;var get_textarea_selection=function(){function t(){return""}if(typeof document>"u")return t;var e=document.createElement("textarea"),u="selectionStart"in e;return e=null,u?function(i){var f=i.selectionEnd-i.selectionStart;return i.value.substr(i.selectionStart,f)}:document.selection?function(){var i=document.selection.createRange();return i.text()}:t}();function clear_textarea_selection(t){t.selectionStart=t.selectionEnd=0}function common_string(t,e,u){if(!e.length)return"";for(var i=string_case(t),f=[],D=t.length;D<e[0].length;++D){for(var p=!1,h=e[0].charAt(D),g=h.toLowerCase(),y=1;y<e.length;++y){p=!0;var F=e[y].charAt(D),L=F.toLowerCase();if(h!==F)if(u||i==="mixed"){p=!1;break}else if(g===L)if(i==="lower")h=h.toLowerCase();else if(i==="upper")h=h.toUpperCase();else{p=!1;break}else{p=!1;break}}if(p)f.push(h);else break}return t+f.join("")}function trigger_terminal_change(t){terminals.forEach(function(e){e.settings().onTerminalChange.call(e,t)})}var select=function(){if(root.getSelection){var t=root.getSelection();return t.setBaseAndExtent?function(e,u){var i=root.getSelection();i.setBaseAndExtent(e,0,u,1)}:function(e,u){var i=root.getSelection(),f=document.createRange();f.setStart(e,0),f.setEnd(u,u.childNodes.length),i.removeAllRanges(),i.addRange(f)}}else return $.noop}();function process_command(t,e){var u=t.trim(),i=u.match(command_re)||[];if(i.length){var f=i.shift(),D=$.map(i,function(g){return g.match(/^["']/)?(g=g.replace(/\n/g,"\\u0000\\u0000\\u0000\\u0000"),g=e(g),g.replace(/\x00\x00\x00\x00/g,`
`)):e(g)}),p=$.map(i,function(g){var y=g.match(/^(['"`]).*\1$/);return y&&y[1]||""}),h=u.slice(f.length).trim();return{command:t,name:f,args:D,args_quotes:p,rest:h}}else return{command:t,name:"",args:[],args_quotes:[],rest:""}}function on_height_change(t){var e=window.visualViewport.scale,u=Math.round(window.visualViewport.height*e);t(u),window.visualViewport.addEventListener("resize",function(){var i=window.visualViewport.scale,f=Math.round(window.visualViewport.height*i);u!==f&&(u=f,t(u))})}$.terminal={version:"2.43.1",date:"Sun, 08 Sep 2024 09:58:43 +0000",color_names:["transparent","currentcolor","black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","rebeccapurple"],Cycle,History,Stack,valid_color:function(e){return e.match(color_re)?!0:$.inArray(e.toLowerCase(),$.terminal.color_names)!==-1},unclosed_strings:function(e){return!!e.match(unclosed_strings_re)},escape_regex:function(e){if(typeof e=="string"){var u=/([-\\^$[\]()+{}?*.|])/g;return e.replace(u,"\\$1")}},have_formatting:function(e){return typeof e=="string"&&!!e.match(format_exist_re)},is_formatting:function(e){return typeof e=="string"&&!!e.match(format_full_re)},is_extended_command:function(e){return typeof e=="string"&&e.match(format_exec_re)&&!$.terminal.is_formatting(e)},each_extended_command:function(t,e){var u=t.split(format_exec_split_re);return $.map(u,function(i){if($.terminal.is_extended_command(i)){var f=i.replace(/^\[\[|\]\]$/g,"");return e(f)||""}return i}).join("")},format_split:function(e){return e.split(format_split_re).filter(Boolean)},tracking_replace:function(e,u,i,f){if(!(u instanceof RegExp))throw new Error("tracking_replace: Second argument need to be RegExp");function D(P,te,B){return P.slice(te,B)}function p(P){return $.terminal.strip(P).length}var h="",g,y=0,F,L=f,M;for(u.lastIndex=0;g=u.exec(e);){if(u.global){var z=p(D(e,0,u.lastIndex));M=z-p(g[0])}else M=g.index,z=M+p(g[0]);if(y<M&&(h+=D(e,y,M)),y=z,typeof i=="function"?F=i.apply(null,g):F=i.replace(/\$(\$|\d)/g,function(P,te){return te==="$"?"$":g[te]}),h+=F,M<f){var R=p(F);R+=count_selfclosing_formatting(F),z<f?L=Math.max(0,L+R-p(g[0])):L+=R-(f-M)}if(!u.global)break}return y<p(e)&&(h+=D(e,y)),e===h?[e,f]:[h,L]},iterate_formatting:function(e,u){function i(ve){return ve===" "||ve==="	"||ve===`
`}function f(ve){return te&&e.slice(ve-6,ve)==="&nbsp;"||i(e[ve-1])}function D(ve){return te?e.slice(ve).match(entity_re):null}function p(ve){return e[ve]==="["&&e[ve+1]==="["}function h(ve){return e[ve-1]!=="\\"&&e[ve]==="\\"&&e[ve+1]==="]"}function g(ve){return e[ve]==="]"||e[ve]==="["}function y(ve){return Z&&!Fe&&(e[ve]!=="]"&&!ee||!P)||E&&!B}var F=make_next_char_fun(e);function L(){var ve=F(re);return ve.length>1&&$.terminal.length(re)>1?ve.length-1:0}function M(){return f(Q)&&(Z||Fe)&&(w===-1&&ue!==Q||w!==-1)}var z=!1;function R(){return Q===e.length-1&&!z?z=!0:z=B&&!!re.match(/^.]$/),z}for(var P=$.terminal.have_formatting(e),te=entity_re.test(e),B="",E=!1,x=0,V,w=-1,ie=-1,ue,j=0,pe=0,se=/(&[^;]+);$/,Q=0;Q<e.length;Q++){var re=e.slice(Q),ee=!1;V=re.match(format_start_re),V?(B=V[1],E=!1):B?e[Q]==="]"&&(ee=E,E?(B="",E=!1):E=!0):E=!0;var Z=B&&E||!B,Fe=p(Q);M()&&(w=Q,ie=x);var Pe=g(Q);if(pe=0,Z)if(e[Q]==="&"){if(V=D(Q),V){Q+=V[1].length-2;continue}++x,++j}else h(Q)?(++x,++j,pe=1,Q+=1):(!Pe||!P||E&&!B)&&(++x,++j);if(y(Q)){strlen(e[Q])===2&&j++;var ke=F(re),Xe=ke.length;ke===";"&&(V=e.slice(0,Q+1).match(se),V&&(pe=V[1].length,Xe=pe+1));var Me={last:R(),count:x,index:Q-pe,formatting:B,length:j,text:E,size:Xe,space:w,space_count:ie},Be=u(Me);if(Be===!1)break;if(Be&&(Be.count!==undefined&&(x=Be.count),Be.length!==undefined&&(j=Be.length),Be.space!==undefined&&(ue=w,w=Be.space),Be.index!==undefined)){Q=Be.index;continue}}else Q===e.length-1&&!z&&u({last:!0,count:x+1,index:Q,formatting:B,length:0,text:E,space:w});E&&(Q+=L())}},partition:function(e,u){var i=$.extend({wrap:!0},u);if(!$.terminal.have_formatting(e)){var f=$.terminal.split_characters(e);return f.map(p)}var D=[];function p(g){return g.match(/\\$/)&&(g+="\\"),"[[;;]"+g+"]"}function h(g){return $.terminal.is_formatting(g)?g.match(/\\]$/)&&(g=g.replace(/\\]/g,"\\\\]")):i.wrap&&(g=p(g)),g}return $.terminal.iterate_formatting(e,function(y){if(y.text){var F=[];y.formatting&&F.push(y.formatting),F.push(e.substring(y.index,y.index+y.size)),y.formatting&&F.push("]"),D.push(h(F.join("")))}}),D},substring:function(e,u,i){var f=$.terminal.split_characters(e);if(!f.slice(u,i).length)return"";if(!$.terminal.have_formatting(e))return f.slice(u,i).join("");var D=0,p,h="",g="",y,F=1;return $.terminal.iterate_formatting(e,function(M){u&&M.count===u+1&&(D=M.index,M.formatting&&(h=M.formatting)),i&&M.count===i&&(g=M.formatting,y=M.index,F=M.size),M.count===i+1&&(p=M.index,M.formatting&&(p=y+F))}),u&&!D?"":(p===undefined&&(p=e.length),e=h+e.slice(D,p),g&&(e=e.replace(/(\[\[^\]]+)?\]$/,""),e+="]"),e)},normalize:function(e){return e=e.replace(format_re,function(i,f,D){if(f.match(self_closing_re)&&D==="")return"[["+f+"] ]";if(D==="")return"";function p(L){return L.replace(/\\\]/g,"&#93;").replace(/\n/g,"\\n").replace(/&nbsp;/g," ")}f=p(f);var h=f.match(/;/g).length;if(h>=4){var g=f.split(/;/),y=g.slice(0,4).join(";"),F=g.slice(4).join(";");return"[["+y+";"+(F||D)+"]"+D+"]"}else h===2?h=";;":h===3&&(h=";");return f+=h+p(D),"[["+f+"]"+D+"]"}),$.terminal.amp(e)},split_equal:function(e,u,i){typeof i=="boolean"&&(i={keepWords:i});for(var f=$.extend({trim:!1,keepWords:!1},i),D="",p=[],h=$.terminal.normalize(e).split(/\n/g),g=$.terminal.have_formatting(e),y=0,F=h.length;y<F;++y){if(h[y]===""){p.push("");continue}var L=h[y],M=make_next_char_fun(L),z=0,R,P=L.length,te=/\[\[[^\]]+\](?:[^\][]|\\\])+\]$/.test(L),B=/^(&nbsp;|\s)/.test(L);if(!g&&P<u){p.push(L);continue}$.terminal.iterate_formatting(L,function(x){var V,w;if(x.length>=u||x.last||x.length===u-1&&strlen(L[x.index+1])===2){var ie=!1;if(f.keepWords&&x.space!==-1){var ue=text(L).substring(x.space_count);ue=ue.slice(0,u).replace(/\s+$/,"");var j=strlen(ue);(space_re.test(ue)||j<u)&&(ie=!0)}var pe=x.index+x.size;te&&(pe+=1);var se;if(f.keepWords&&x.space!==-1&&pe!==P&&ie?(R=L.slice(z,x.space),se=x.space-1):(w=L.slice(x.index),V=M(w),R=L.slice(z,x.index)+V,x.last&&te&&V!=="]"&&(R+="]"),se=x.index+V.length-1),(f.trim||f.keepWords)&&(R=R.replace(/(&nbsp;|\s)+$/g,"")),!B&&!D&&(R=R.replace(/^(&nbsp;|\s)+/g,"")),z=(se||x.index)+1,D){var Q=/^[^\]]*\]/.test(R);R=D+R,Q&&(D="")}var re=R.match(format_re);if(re){var ee=re[re.length-1];ee[ee.length-1]!=="]"?(D=ee.match(format_begin_re)[1],R+="]"):format_end_re.test(R)&&(R=R.replace(format_end_re,""),D=ee.match(format_begin_re)[1])}return p.push(R),{index:se,length:0,space:-1}}})}return p},amp:function(e){return e.replace(/&(?!#[0-9]+;|#x[0-9a-f]+;|[a-z]+;)/gi,"&amp;")},encode:function(e,u){var i=$.extend({tabs:4,before:""},u);return $.terminal.amp(e).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").split(`
`).map(function(f){var D=f.split(/((?:\[\[[^\]]+\])?\t(?:\])?)/);return D=D.filter(Boolean),D.map(function(p,h){return p.match(/\t/)?p.replace(/\t([^\t]*)$/,function(g,y){if(h!==0&&D[h-1].match(/\t\]?$/)){var F=new Array(i.tabs+1).join("&nbsp;");return F+y}else{var L=D.slice(h-1,h).join("");i.before&&h<=1&&(L=i.before+L);var M=$.terminal.length(L),z=i.tabs-M%i.tabs;return z===0&&(z=4),new Array(z+1).join("&nbsp;")+y}}):p}).join("")}).join(`
`)},nested_formatting:function(e){if(!$.terminal.have_formatting(e))return e;var u=[],i=/((?:\[\[(?:[^\][]|\\\])+\])?(?:[^\][]|\\\])*\]?)/,f=/\[\[([^\][]+)\][\s\S]*/,D=/^\[\[([^;]*);([^;]*);([^\]]*)\]/,p=3,h=5;function g(B,E,x){return x.indexOf(B)===E}function y(B,E){return B=F(B),E?$.extend(E,B):B}function F(B){var E={};return B.split(/\s*;\s*/).forEach(function(x){var V=x.split(":").map(function(ue){return ue.trim()}),w=V[0],ie=V[1];E[w]=ie}),E}function L(B){var E=B.slice();return B[h]&&(E[h]=z(B[h])),B[p]&&(E[p]=R(B[p])),E[0]=M(B[0]),E.join(";")}function M(B){var E=B.filter(function(x){return x[0]==="-"}).map(function(x){return x[1]});return B.filter(function(x){return E.indexOf(x)===-1&&E.indexOf(x[1])===-1}).join("")}function z(B){return JSON.stringify(B,function(E,x){return E==="style"?P(x):x})}function R(B){return B.filter(g).join(" ")}function P(B){return Object.keys(B).map(function(E){return E+":"+B[E]}).join(";")}function te(B){function E(Q){x[h]||(x[h]={});try{var re=JSON.parse(Q);if(re.style){var ee=re.style,Z=x[h].style;re.style=y(ee,Z),x[h]=$.extend(re,x[h],{style:y(ee,Z)})}else x[h]=$.extend(re,x[h])}catch{warn("Invalid JSON "+Q)}}var x=[[],"",""];if(!B.length)return x;for(var V=B.length;V--;){var w=$.terminal.parse_formatting(B[V]);if(w.length>5){var ie=w.slice(5).join(";");w=w.slice(0,5).concat(ie)}var ue=w[0].split(/(-?[@!gbiusor])/g).filter(Boolean);ue.forEach(function(Q){x[0].indexOf(Q)===-1&&x[0].push(Q)});for(var j=1;j<w.length;++j){var pe=w[j].trim();if(pe)if(j===p){x[p]||(x[p]=[]);var se=pe.split(/\s+/);x[p]=x[p].concat(se)}else j===h?E(pe):x[j]||(x[j]=pe)}}return L(x)}return e.split(i).filter(Boolean).map(function(B){var E;if(B.match(/^\[\[/)&&!$.terminal.is_extended_command(B)){var x=B.replace(f,"$1"),V=$.terminal.is_formatting(B);B=B.replace(D,""),u.push(x),$.terminal.nested_formatting.__inherit__?E=te(u):E=x,V?u.pop():B+="]",B="[["+E+"]"+B}else{var w=!1;B.match(/\]/)&&(w=!0),u.length&&($.terminal.nested_formatting.__inherit__?E=te(u):E=u[u.length-1],B="[["+E+"]"+B),w?u.pop():u.length&&(B+="]")}return B}).join("")},escape_formatting:function(e){return $.terminal.escape_brackets(e)},apply_formatters:function(e,u){if(e==="")return u&&typeof u.position=="number"?["",u.position]:"";function i(R,P,te,B){!R.__no_warn__&&$.terminal.length(te)!==$.terminal.length(B)&&warn("Your formatter["+P+"] change length of the string, you should use [regex, replacement] formatter or function  that return [replacement, position] instead")}function f(R){if(!u||!R)return!0;var P=["echo","command","prompt"],te=P.some(function(x){return R[x]===!0});if(!te)return!0;for(var B=P.length;B--;){var E=P[B];if(R[E]===!0&&u[E]===!0)return!0}return!1}u=u||{};var D=u.formatters||$.terminal.defaults.formatters,p=0;function h(R,P){var te=$.extend({},u,{position:P[1]}),B=R(P[0],te);return typeof B=="string"?(i(R,p-1,B,P[0]),typeof B=="string"?[B,te.position]:P):is_array(B)&&B.length===2?B:P}var g;typeof u.position=="number"?g=[e,u.position]:g=[e,0];try{var y=D.reduce(function(R,P){if(p++,typeof P=="function"&&P.__meta__)return h(P,R);var te=0,B=!1,E=$.terminal.format_split(R[0]),x=E.map(function(se){var Q,re=text(se).length;R[1]<te+re&&!B?(Q=R[1]-te,B=!0):B?Q=-1:Q=R[1];var ee=te,Z;if(te+=re,$.terminal.is_formatting(se))return B?[se,Q]:[se,-1];if(is_array(P)){var Fe=P[2]||{};if(Z=[se,Q<0?0:Q],Z[0].match(P[0])&&f(P[2]))if(Fe.loop)for(;Z[0].match(P[0]);)Z=$.terminal.tracking_replace(Z[0],P[0],P[1],Z[1]);else Z=$.terminal.tracking_replace(Z[0],P[0],P[1],Z[1]);if(Q<0)return[Z[0],-1]}else typeof P=="function"&&(Z=h(P,[se,Q]));if(typeof Z<"u"){Z[1]!==-1&&(Z[1]+=ee);var Pe=text(Z[0]).length;return Z}return[se,-1]}),V=x.filter(function(se){return se[1]!==-1})[0],w=x.map(function(se){return se[0]}).join(""),ie;typeof V>"u"?ie=R[1]:ie=V[1];var ue=text(w).length;if(ue+=count_selfclosing_formatting(w),ie>ue&&(ie=ue),w===R[0])return R;var j=$.terminal.strip(R[0]),pe=$.terminal.strip(w);return j===pe?[w,R[1]]:[w,ie]},g);if(typeof u.position=="number"){var F=$.terminal.strip(y[0]).length;if($.terminal.length(y[0])<F){var L=y[1];L=normalize_position(y[0],L);var M=$.terminal.length(y[0]);L>M&&(L=M),y[1]=L}return y}else return y[0]}catch(R){var z="Error in formatter ["+(p-1)+"]";throw D.splice(p-1),new $.terminal.Exception("formatting",z,R.stack)}},escape_brackets:function(e){return e.replace(/\[/g,"&#91;").replace(/\]/g,"&#93;").replace(/\\/g,"&#92;")},unescape_brackets:function(e){return e.replace(/&#91;/g,"[").replace(/&#93;/g,"]").replace(/&#92;/g,"\\")},length:function(e,u){return e?$.terminal.split_characters(u?e:text(e)).length:0},split_characters:function(e){if(is_simple_text(e))return e.split("");for(var u=[],i=make_next_char_fun(e);e.length;){var f=i(e);e=e.slice(f.length),u.push(f)}return u},columns:function(e,u,i){e=e.map(function(z){return typeof z!="string"?String(z):z});var f=e.map(function(z){return $.terminal.strip(z)}),D=f.map(function(z){return strlen(z)});typeof i>"u"&&(i=4);var p=Math.max.apply(null,D)+i,h=Math.floor(u/p)-1;if(h<1)return e.join(`
`);for(var g=[],y=0,F=e.length;y<F;y+=h){var L=e.slice(y,y+h),M=L.pop();g.push(L.reduce(function(z,R){var P=$.terminal.strip(R),te=new Array(p-P.length+1).join(" ");return z.push(R+te),z},[]).join("")+M)}return g.join(`
`)},strip:function(e){return $.terminal.have_formatting(e)?$.terminal.format_split(e).map(function(u){return $.terminal.is_formatting(u)?(u=u.replace(format_parts_re,"$6"),u.replace(/\\([[\]])/g,function(i,f){return f})):u}).join(""):e},active:function(){return terminals.front()},last_id:function(){var e=terminals.length();return e-1},parse_argument:function(e,u){function i(D){return D.split(string_re).map(function(p){if(p.match(/^['"`]/)){if(p==='""'||p==="''"||p==="``")return"";var h=p[0],g=new RegExp("(\\\\\\\\(?:\\\\\\\\)*)"+h,"g");p=p.replace(g,"$1").replace(/^[`'"]|[`'"]$/g,""),h==="'"&&(p=p.replace(/"/g,'\\"'))}return p='"'+p+'"',JSON.parse(p)}).join("")}if(u===!1)return e[0]==="'"&&e[e.length-1]==="'"?e.replace(/^'|'$/g,""):e[0]==="`"&&e[e.length-1]==="`"?e.replace(/^`|`$/g,""):e[0]==='"'&&e[e.length-1]==='"'?e.replace(/^"|"$/g,"").replace(/\\([" ])/g,"$1"):e.match(/\/.*\/[gimy]*$/)?e:e.match(/['"`]]/)?i(e):e.replace(/\\ /g," ");if(e==="true")return!0;if(e==="false")return!1;var f=e.match(re_re);return f?new RegExp(f[1],f[2]):e.match(/['"`]/)?i(e):e.match(/^-?[0-9]+n?$/)?e.match(/n$/)?BigInt(e.replace(/n$/,"")):parseInt(e,10):e.match(float_re)?parseFloat(e):e.replace(/\\(['"() ])/g,"$1")},parse_arguments:function(e){return $.map(e.match(command_re)||[],$.terminal.parse_argument)},split_arguments:function(e){return $.map(e.match(command_re)||[],function(u){return $.terminal.parse_argument(u,!1)})},parse_command:function(e){return process_command(e,$.terminal.parse_argument)},split_command:function(e){return process_command(e,function(u){return $.terminal.parse_argument(u,!1)})},parse_options:function t(e,u){var i=$.extend({},{boolean:[]},u);if(typeof e=="string")return t($.terminal.split_arguments(e),u);var f={_:[]};function D(h){this.value=h}var p=e.reduce(function(h,g){var y=typeof g=="string"?g:"";if(y.match(/^--?[^-]/)&&h instanceof D&&(f[h.value]=!0),y.match(/^--[^-]/)){var F=y.replace(/^--/,"");if(i.boolean.indexOf(F)===-1)return new D(F);f[F]=!0}else if(y.match(/^-[^-]/)){var L=y.replace(/^-/,"").split("");if(i.boolean.indexOf(L.slice(-1)[0])===-1)var M=L.pop();if(L.forEach(function(z){f[z]=!0}),M)return new D(M)}else h instanceof D?f[h.value]=g:g&&f._.push(g);return null},null);return p instanceof D&&(f[p.value]=!0),f},parse_formatting:function(t){var e=$.terminal.unescape_brackets(t).split(";"),u=4;if(e.length>=5){var i=$.terminal.escape_brackets(e[u]);e[u]=i}return e},extended_command:function extended_command(term,string,options){var settings=$.extend({invokeMethods:!1},options),deferred=new $.Deferred;try{change_hash=!1;var m=string.match(extended_command_re);if(m)if(!settings.invokeMethods)warn("To invoke terminal or cmd methods you need to enable invokeMethods option"),deferred.reject();else{string=m[1];var obj=m[2]==="terminal"?term:term.cmd(),fn=m[3];try{var args=eval("["+m[4]+"]");if(!obj[fn])term.error("Unknow function "+fn);else{var ret=obj[fn].apply(term,args);if(ret&&ret.then)return ret}deferred.resolve()}catch(t){term.error("Invalid invocation in "+$.terminal.escape_brackets(string)),deferred.reject()}}else return term.exec(string,!0).done(function(){change_hash=!0})}catch(t){deferred.reject()}return deferred.promise()},iterator:function(t){function e(D){return $.terminal.is_formatting(D)&&D.match(/\]\\\]/)&&(D=D.replace(/\]\\\]/g,"]\\\\]")),D}if(typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"){var u=$.terminal.length(t),i=0,f={};return f[Symbol.iterator]=function(){return{next:function(){if(i<u){var D=$.terminal.substring(t,i,i+1);return i++,{value:e(D)}}else return{done:!0}}}},f}},formatter:new function(){try{this[Symbol.split]=function(t){return $.terminal.format_split(t)},this[Symbol.match]=function(t){return t.match(format_re)},this[Symbol.replace]=function(t,e){return t.replace(format_parts_re,e)},this[Symbol.search]=function(t){return t.search(format_re)}}catch{}},process_formatting:function(t){return $.terminal.format_split(t).map(function(e){if($.terminal.is_formatting(e)){for(var u=e.match(new RegExp(format_parts_re,"i")),i=u.pop(),f=1;f<=2;++f)$.terminal.valid_color(u[f])||(u[f]="");return u.slice(1,4).concat(i)}else return["","","",e]})},new_formatter:function(t){$.terminal.defaults.formatters.unshift(t)}},function(){function t(i,f){return i===""?f:i.replace(/&#93;/g,"]").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function e(i){return i.match(/^\.{1,2}\//)||i.match(/^\//)||!(i.match(/\//)||i.match(/^[^:]+:/))}function u(i,f){return function(D){if(f.anyLinks)return!0;var p=i(D);return p||warn("Invalid URL "+D+" only http(s) ftp and path are allowed"),p}}$.terminal.format=function(f,D){var p=$.extend({},{linksNoReferrer:!1,linksNoFollow:!1,allowedAttributes:[],charWidth:undefined,escape:!0,anyLinks:!1},D||{}),h=u(function(E){return E.match(/^((https?|file|ftp):\/\/|\.{0,2}\/)/)||e(E)},p),g=u(function(E){return E.match(/^(https?:|file:|blob:|data:)/)||e(E)},p);function y(E){return E.length&&p.allowedAttributes.length?E.filter(function(x){if(x==="data-text")return!1;for(var V=!1,w=p.allowedAttributes,ie=0;ie<w.length;++ie)if(w[ie]instanceof RegExp){if(w[ie].test(x)){V=!0;break}}else if(w[ie]===x){V=!0;break}return V}):[]}function F(E,x,V){if(x&&V.length){var w,ie=V.map(function(ue){if(x[ue]===null)return"";if(x[ue]===!0)return ue;var j=escape_html_attr(x[ue]);return ue==="style"&&(E&&(j=j?E+";"+j:E),w=!0),ue+'="'+j+'"'}).filter(Boolean);return ie.length?(!w&&E&&ie.push('style="'+E+'"'),ie.join(" ")):""}return E?'style="'+E+'"':""}function L(){var E=["noopener"];return p.linksNoReferrer&&E.unshift("noreferrer"),p.linksNoFollow&&E.unshift("nofollow"),E}var M=L().join(" ");function z(E,x,V){if(E.match(email_re))return'<a href="mailto:'+E+'"';var w=["<a"];return E&&h(E)&&w.push('href="'+E+'"'),x?(V.includes("target")&&x.target===undefined&&(x.target="_blank"),V.includes("rel")&&x.rel===undefined&&(x.rel=M)):(w.push('rel="'+M+'"'),w.push('target="_blank"')),w.join(" ")}function R(E,x){var V="<img";return g(E)&&(V+=' src="'+E+'"',x&&(V+=' alt="'+x+'"')),V}function P(E){for(var x=0,V=!1;x<E.length;){if(E[x]==="&")V=!0;else{if(E[x]===";"&&!V)return x;E[x]===";"&&(V=!1)}x++}return-1}function te(E,x,V,w,ie,ue,j){var pe,se=[];if(ue.match(/;/))try{var Q=P(ue);if(Q!==-1){var re=ue.substring(Q+1);re=re.replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">"),re.match(/^\s*\{[^}]*\}\s*$/)&&(pe=JSON.parse(re),se=y(Object.keys(pe)),ue=ue.substring(0,Q))}}catch{}if(j===""&&!x.match(/@/))return"";j=safe(j),j=j.replace(/\\\]/g,"&#93;"),p.escape&&(j=j.replace(/\\\\/g,"\\"));var ee={};x.indexOf("b")!==-1&&(ee["font-weight"]="bold");var Z=[];x.indexOf("u")!==-1&&Z.push("underline"),x.indexOf("s")!==-1&&Z.push("line-through"),x.indexOf("o")!==-1&&Z.push("overline"),Z.length&&(ee["text-decoration"]=Z.join(" ")),x.indexOf("i")!==-1&&(ee["font-style"]="italic"),x.indexOf("r")!==-1&&(ie.trim()?ie+=" terminal-inverted":ie="terminal-inverted"),$.terminal.valid_color(V)&&($.extend(ee,{color:V,"--color":V,"--original-color":V}),x.indexOf("!")!==-1&&(ee["--link-color"]=V),x.indexOf("g")!==-1&&(ee["text-shadow"]="0 0 5px "+V)),$.terminal.valid_color(w)&&$.extend(ee,{"background-color":w,"--background":w});var Fe=t(ue,j),Pe=extra_css(j,p);Pe&&(j=wide_characters(j,p),$.extend(ee,Pe));var ke,Xe=style_to_string(ee);x.indexOf("!")!==-1?ke=z(Fe,pe,se):x.indexOf("@")!==-1?ke=R(Fe,j):ke="<span";var Me=F(Xe,pe,se);return Me&&(ke+=" "+Me),ie!==""&&(ke+=' class="'+ie+'"'),x.indexOf("!")!==-1?ke+=" data-text>"+j+"</a>":x.indexOf("@")!==-1?ke+=" data-text/>":ke+=' data-text="'+Fe+'"><span>'+j+"</span></span>",ke}if(typeof f=="string"){var B=$.terminal.format_split(f);return f=$.map(B,function(E){if(E==="")return E;if($.terminal.is_formatting(E))return E=E.replace(/\[\[[^\]]+\]/,function(ie){return ie.replace(/&nbsp;/g," ")}),E.replace(format_parts_re,te);E=safe(E),E=E.replace(/\\\]/,"&#93;");var x=t(E),V=extra_css(E,p),w;return V?(E=wide_characters(E,p),w='<span style="'+style_to_string(V)+'"'):w="<span",w+' data-text="'+x+'">'+E+"</span>"}).join(""),f.replace(/<span><br\s*\/?><\/span>/gi,"<br/>")}else return""}}(),$.terminal.Exception=function t(e,u,i){arguments.length===1?(this.message=arguments[0],this.type="TERMINAL"):(this.type=e,this.message=u,i&&(this.stack=i))},$.terminal.Exception.prototype=new Error,$.terminal.Exception.prototype.toString=function(){return this.message+`
`+this.stack},$.fn.visible=function(){return this.css("visibility","visible")},$.fn.hidden=function(){return this.css("visibility","hidden")};var warnings=[];function warn(t){t="[jQuery Terminal] "+t,warnings.indexOf(t)===-1&&(warnings.push(t),console?console.warn?console.warn(t):console.log&&console.log(t):setTimeout(function(){throw new Error("WARN: "+t)},0))}var ids={};$.jrpc=function(t,e,u,i,f){var D=new $.Deferred,p;$.isPlainObject(t)?p=t:p={url:t,method:e,params:u,success:i,error:f};function h(F){return typeof F.id=="number"&&(typeof F.result<"u"||typeof F.error<"u")}ids[p.url]=ids[p.url]||0;var g={jsonrpc:"2.0",method:p.method,params:p.params,id:++ids[p.url]};function y(F,L,M,z){h(F)||p.method==="system.describe"?(p.success&&p.success(F,M,z),D.resolve(F)):(p.error&&p.error(z,"Invalid JSON-RPC"),D.reject({message:"Invalid JSON-RPC",response:L}))}return $.ajax({url:p.url,beforeSend:function(L,M){is_function(p.request)&&p.request(L,g),M.data=JSON.stringify(g)},success:function(L,M,z){var R=z.getResponseHeader("Content-Type");R.match(/(application|text)\/json/)||warn("Response Content-Type is neither application/json nor text/json");var P;try{P=JSON.parse(L)}catch(B){if(p.error)p.error(z,"Invalid JSON",B);else throw new $.terminal.Exception("JSON","Invalid JSON",B.stack);D.reject({message:"Invalid JSON",response:L});return}if(is_function(p.response)&&p.response(z,P),is_function(p.intercept)){var te=p.intercept(g,P);if(te)return unpromise(te,function(B){var E=JSON.stringify(B);y(B,E,M,z)})}y(P,L,M,z)},error:p.error,contentType:"application/json",dataType:"text",async:!0,cache:!1,type:"POST"}),D.promise()},$.rpc=function(t,e,u){var i=new $.Deferred;function f(p){p.error?i.reject(p.error):i.resolve(p.result)}function D(p,h,g){i.reject({message:g})}return $.jrpc(t,e,u,f,D),i.promise()};function terminal_ready(t){return!!(t.closest("body").length&&t.is(":visible")&&t.find(".cmd-prompt").length)}function format_stack_trace(t){return t=$.terminal.escape_brackets(t),t.split(/\n/g).map(function(e){return"[[;;;terminal-error]"+e.replace(url_re,function(u){return"]"+u+"[[;;;terminal-error]"})+"]"}).join(`
`)}function get_char_size(t){var e;if(terminal_ready(t)){var u=t.find(".cmd-prompt").clone().css({visiblity:"hidden",position:"absolute"});u.appendTo(t.find(".cmd")).html("&nbsp;").wrap('<div class="cmd-wrapper"/>'),e={width:u.width(),height:u.height()},u.parent().remove()}else{var i=$('<div class="terminal terminal-temp"><div class="terminal-wrapper"><div class="terminal-output"><div><div class="terminal-line" style="float: left"><span>&nbsp;</span></div></div></div><div class="terminal-pixel"></div></div>').appendTo("body");if(i.addClass(t.attr("class")).attr("id",t.attr("id")),t){var f=t.attr("style");f&&(f=f.split(/\s*;\s*/).filter(function(p){return!p.match(/display\s*:\s*none/i)}).join(";"),i.attr("style",f))}var D=i.find(".terminal-line");e={width:D.width(),height:D.height()},i.remove()}return e}function get_num_chars(t,e){var u=t.find(".terminal-fill").width(),i=Math.floor(u/e.width);return i||1e3}function get_num_rows(t,e){var u=t.find(".terminal-fill"),i=u.height();return Math.floor(i/e.height)}function all(t,e){var u=t.filter(function(i){return i[e]()===i});return u.length===t.length}function string_case(t){var e=t.split("");return all(e,"toLowerCase")?"lower":all(e,"toUpperCase")?"upper":"mixed"}function same_case(t){return string_case(t)!=="mixed"}function is_function(t){return get_type(t)==="function"}function is_string(t){return get_type(t)==="string"}function is_object(t){return t&&typeof t=="object"}function is_promise(t){return is_object(t)&&is_function(t.then||t.done)}function is_big_int(t){return typeof t=="bigint"}function is_deferred(t){return is_promise(t)&&is_function(t.promise)}Array.isArray||(Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"});function is_array(t){return Array.isArray(t)}function have_custom_font(t){var e=$(t).css("--font");if(!e)return!1;var u=Array.from(document.fonts.keys()),i=u.find(function(f){return f.family===e});return!!i}function get_type(t){return typeof t=="function"?"function":t===null?t+"":Array.isArray(t)?"array":t instanceof String?"string":typeof t=="object"?"object":typeof t}var version_set=!$.terminal.version.match(/^\{\{/),copyright="Copyright (c) 2011-2024 Jakub T. Jankiewicz <https://jcubic.pl/me>",version_string=version_set?" v. "+$.terminal.version:" ",reg=new RegExp(" {"+version_string.length+"}$"),name_ver="jQuery Terminal Emulator"+(version_set?version_string:""),signatures=[["jQuery Terminal","(c) 2011-2024 jcubic"],[name_ver,copyright.replace(/^Copyright | *<.*>/g,"")],[name_ver,copyright.replace(/^Copyright /,"")],["      _______                 ________                        __","     / / _  /_ ____________ _/__  ___/______________  _____  / /"," __ / / // / // / _  / _/ // / / / _  / _/     / /  \\/ / _ \\/ /","/  / / // / // / ___/ // // / / / ___/ // / / / / /\\  / // / /__","\\___/____ \\\\__/____/_/ \\__ / /_/____/_//_/_/_/_/_/  \\/\\__\\_\\___/","         \\/          /____/                                   ".replace(reg," ")+version_string,copyright],["      __ _____                     ________                              __","     / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /"," __ / // // // // // _  // _// // / / // _  // _//     // //  \\/ // _ \\/ /","/  / // // // // // ___// / / // / / // ___// / / / / // // /\\  // // / /__","\\___//____ \\\\___//____//_/ _\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\__\\_\\___/","          \\/              /____/                                          ".replace(reg,"")+version_string,copyright]];$.terminal.nested_formatting.__meta__=!0,$.terminal.nested_formatting.__inherit__=!0,$.terminal.nested_formatting.__no_warn__=!0,$.terminal.defaults={prompt:"> ",history:!0,exit:!0,clear:!0,enabled:!0,maskChar:"*",wrap:!0,checkArity:!0,raw:!1,tabindex:1,invokeMethods:!1,exceptionHandler:null,pauseEvents:!0,softPause:!1,mousewheel:null,touchscroll:null,memory:!1,cancelableAjax:!0,processArguments:!0,execAnimation:!1,execAnimationDelay:100,linksNoReferrer:!1,externalPause:!0,useCache:!0,anyLinks:!1,linksNoFollow:!1,processRPCResponse:null,completionEscape:!0,mobileDelete:is_mobile,convertLinks:!0,errorOnAbort:!0,extra:{},tabs:4,historySize:60,scrollObject:null,historyState:!1,importHistory:!1,historyFilter:null,echoCommand:!0,scrollOnEcho:!0,login:null,outputLimit:-1,formatters:[$.terminal.nested_formatting],unixFormatting:{escapeBrackets:!1,ansiParser:{},ansiArt:!1},onAjaxError:null,pasteImage:!0,scrollBottomOffset:20,wordAutocomplete:!0,caseSensitiveAutocomplete:!0,caseSensitiveSearch:!0,clickTimeout:200,holdTimeout:400,holdRepeatTimeout:200,repeatTimeoutKeys:[],mobileIngoreAutoSpace:[],request:$.noop,response:$.noop,describe:"procs",onRPCError:null,keymap:null,doubleTab:null,doubleTabEchoCommand:!1,completion:!1,onInit:$.noop,onClear:$.noop,onBlur:$.noop,onFocus:$.noop,onTerminalChange:$.noop,onExit:$.noop,onPush:$.noop,onPop:$.noop,keypress:$.noop,keydown:$.noop,renderHandler:null,onAfterRedraw:$.noop,onEchoCommand:$.noop,onPaste:$.noop,onFlush:$.noop,onBeforeCommand:null,onAfterCommand:null,onBeforeEcho:null,onAfterEcho:null,onBeforeLogin:null,onAfterLogout:null,onBeforeLogout:null,onCommandChange:null,onPositionChange:null,allowedAttributes:["title","target","rel",/^aria-/,"id",/^data-/],strings:{comletionParameters:"From version 1.0.0 completion function need to have two arguments",wrongPasswordTryAgain:"Wrong username or password try again!",wrongPassword:"Wrong username or password!",ajaxAbortError:"Error while aborting ajax call!",wrongArity:"Wrong number of arguments. Function '%s' expects %s got %s!",commandNotFound:"Command '%s' Not Found!",oneRPCWithIgnore:"You can use only one rpc with describe == false or rpc without system.describe",oneInterpreterFunction:"You can't use more than one function (rpc without system.describe or with option describe == false counts as one)",loginFunctionMissing:"You didn't specify a login function",noTokenError:"Access denied (no token)",serverResponse:"Server responded",wrongGreetings:"Wrong value of greetings parameter",notWhileLogin:"You can't call `%s' function while in login",loginIsNotAFunction:"Authenticate must be a function",canExitError:"You can't exit from main interpreter",invalidCompletion:"Invalid completion",invalidSelector:"Sorry, but terminal said that you use invalid selector!",invalidTerminalId:"Invalid Terminal ID",login:"login",password:"password",recursiveLoop:"Recursive loop in echo detected, skip",notAString:"%s function: argument is not a string",redrawError:"Internal error, wrong position in cmd redraw",invalidStrings:"Command %s have unclosed strings",invalidMask:"Invalid mask used only string or boolean allowed",defunctTerminal:"You can't call method on terminal that was destroyed",abortError:"Abort with CTRL+D",timeoutError:"Signal timed out"}};var requests=[],abort_controllers=[],terminals=new Cycle,save_state=[],hash_commands,change_hash=!1,fire_hash_change=!0,first_instance=!0;$.fn.terminal=function(t,e){function u(n){n&&(this.storage={}),this.set=function(a,o){n?this.storage[a]=o:$.Storage.set(a,o)},this.get=function(a){return n?this.storage[a]:$.Storage.get(a)},this.remove=function(a){n?delete this.storage[a]:$.Storage.remove(a)}}function i(n){if($.terminal.unclosed_strings(n)){var a=$.terminal.escape_brackets(n),o=sprintf(de().invalidStrings,"`"+a+"`");throw new $.terminal.Exception(o)}else return is_function(d.processArguments)?process_command(n,d.processArguments):d.processArguments?$.terminal.parse_command(n):$.terminal.split_command(n)}var f=!1;function D(n,a){return a=a||{},$.terminal.Animation&&n instanceof $.terminal.Animation?(n.start(r),!1):is_function(d.renderHandler)?f?n:unpromise(n,function(o){try{f=!0;var l=d.renderHandler.call(r,o,a,r);if(l===!1)return!1;var c=is_promise(l);return c?always(l,function(){f=!1}):typeof l=="string"||y(l)?l:o}catch(C){return["[[;red;]"+C.message+"]",format_stack_trace(C.stack)].join(`
`)}finally{c||(f=!1)}}):n}function p(n,a){if(y(n)){var o=$.extend({},a,{raw:!0,finalize:function(l){l.find(".terminal-render-item").replaceWith(n),a&&is_function(a.finalize)&&a.finalize(l,r)}});return['<div class="terminal-render-item"/>',o]}}function h(n,a){var o=p(n,a);if(o)return r.echo.apply(r,o),!0}function g(n){return qe.find("[data-index="+n+"]")}function y(n){return n instanceof $.fn.init||n instanceof Element}function F(n){n=D(n),n!==!1&&(h(n)||(is_string(n)?r.echo(n):is_array(n)?r.echo($.map(n,function(a){return JSON.stringify(a)}).join(" ")):typeof n=="object"?r.echo(JSON.stringify(n)):r.echo(n)))}function L(n,a){var o=/(.*):([0-9]+):([0-9]+)$/,l=n.match(o);l&&(r.pause(d.softPause),$.get(l[1],function(c){var C=l[1],k=c.split(`
`),S=+l[2]-1,O=S>2?S-2:0,A=k.slice(O,S+3).map(function(H,I){var Y="["+(S+I-1)+"]: ",ae=a-Y.length-4;return H.length>ae&&(H=H.substring(0,ae)+"..."),(S>2?I===2:I===S)&&(H="[[;#f00;]"+$.terminal.escape_brackets(H)+"]"),Y+H}).filter(Boolean).join(`
`);A.length&&(r.echo("[[b;white;]"+C+"]"),r.echo(A).resume())},"text"))}function M(n){if(is_function(d.onRPCError))d.onRPCError.call(r,n);else if(r.error("&#91;RPC&#93; "+n.message),n.error&&n.error.message){n=n.error;var a="	"+n.message;n.file&&(a+=' in file "'+n.file.replace(/.*\//,"")+'"'),n.at&&(a+=" at line "+n.at),r.error(a)}}function z(n,a){var o;d.rpc&&(o=function(){return d.rpc.apply(r,arguments)});var l=function(c,C){r.pause(d.softPause),$.jrpc({url:n,method:c,params:C,request:function(k,S){try{d.request.call(r,k,S,r)}catch(O){x(O,"USER")}},intercept:o,response:function(k,S){try{d.response.call(r,k,S,r)}catch(O){x(O,"USER")}},success:function(S){S.error?M(S.error):is_function(d.processRPCResponse)?d.processRPCResponse.call(r,S.result,r):S.result!==null&&F(S.result),r.resume()},error:P})};return function(c,C){if(c!==""){try{c=i(c)}catch(S){x(S,"TERMINAL (get_processed_command)");return}if(!a||c.name==="help")l(c.name,c.args);else{var k=C.token(!0);k?l(c.name,[k].concat(c.args)):C.error("&#91;AUTH&#93; "+de().noTokenError)}}}}function R(n,a,o,l){return function(c,C){if(c!==""){var k;try{k=i(c)}catch(H){is_function(d.exception)?d.exception(H,r):r.error("Error: "+(H.message||H));return}var S=n[k.name],O=get_type(S);if(O==="function")if(a&&S.length!==k.args.length)r.error("&#91;Arity&#93; "+sprintf(de().wrongArity,k.name,S.length,k.args.length));else return S.apply(r,k.args);else if(O==="object"||O==="string"){var A=[];O==="object"&&(A=Object.keys(S),S=R(S,a,o)),C.push(S,{prompt:k.name+"> ",name:k.name,completion:O==="object"?A:undefined})}else is_function(l)?l(c,r):is_function(d.onCommandNotFound)?d.onCommandNotFound.call(r,c,r):C.error(sprintf(de().commandNotFound,k.name))}}}function P(n,a,o){r.resume(),is_function(d.onAjaxError)?d.onAjaxError.call(r,n,a,o):a!=="abort"&&r.error("&#91;AJAX&#93; "+a+" - "+de().serverResponse+`:
`+$.terminal.escape_brackets(n.responseText))}function te(n,a,o){function l(S){S.error?M(S.error):is_function(d.processRPCResponse)?d.processRPCResponse.call(r,S.result,r):F(S.result),r.resume()}function c(S,O){try{d.request.call(r,S,O,r)}catch(A){x(A,"USER")}}function C(S,O){try{d.response.call(r,S,O,r)}catch(A){x(A,"USER")}}function k(S){var O=S;if(d.describe!==!1&&d.describe!==""&&d.describe.split(".").forEach(function(I){O=O[I]}),O&&O.length){var A={};$.each(O,function(I,Y){$.isPlainObject(Y)&&typeof Y.name=="string"&&(A[Y.name]=function(){var ae=a&&Y.name!=="help",b=Array.prototype.slice.call(arguments),N=b.length+(ae?1:0);if(d.checkArity&&Y.params&&Y.params.length!==N)r.error("&#91;Arity&#93; "+sprintf(de().wrongArity,Y.name,Y.params.length,N));else{if(r.pause(d.softPause),ae){var W=r.token(!0);W?b=[W].concat(b):r.error("&#91;AUTH&#93; "+de().noTokenError)}$.jrpc({url:n,method:Y.name,params:b,request:c,response:C,success:l,error:P})}})});var H=typeof a=="string"?a:"login";A.help=A.help||function(I){if(typeof I>"u"){var Y=O.map(function(N){return N.name}).join(", ")+", help";r.echo("Available commands: "+Y)}else{var ae=!1;if($.each(O,function(N,W){if(W.name===I){ae=!0;var X="";if(X+="[[bu;;]"+W.name+"]",W.params){var K=W.params;a&&W.name!==H&&(K=K.slice(1)),X+=" "+K.join(" ")}return W.help&&(X+=`
`+W.help),r.echo(X),!1}}),!ae)if(I==="help")r.echo(`[[bu;;]help] [method]
display help for the method or list of methods if not specified`);else{var b="Method `"+I+"' not found ";r.error(b)}}},o(A)}else o(null)}return $.jrpc({url:n,method:"system.describe",params:[],success:k,request:c,response:C,error:function(){o(null)}})}function B(n,a,o){o=o||$.noop;var l=get_type(n),c,C={},k=0,S;if(l==="array")c={},function A(H,I){if(H.length){var Y=H[0],ae=H.slice(1),b=get_type(Y);b==="string"?d.describe===!1?(++k===1?S=z(Y,a):r.error(de().oneRPCWithIgnore),A(ae,I)):(r.pause(d.softPause),te(Y,a,function(N){N?$.extend(c,N):++k===1?S=z(Y,a):r.error(de().oneRPCWithIgnore),r.resume(),A(ae,I)})):b==="function"?(S?r.error(de().oneInterpreterFunction):S=Y,A(ae,I)):b==="object"&&($.extend(c,Y),A(ae,I))}else I()}(n,function(){o({interpreter:R(c,!1,a,S&&S.bind(r)),completion:Object.keys(c)})});else if(l==="string")d.describe===!1?(c={interpreter:z(n,a)},Array.isArray(d.completion)&&(c.completion=d.completion),o(c)):(r.pause(d.softPause),te(n,a,function(A){A?(C.interpreter=R(A,!1,a),C.completion=Object.keys(A)):C.interpreter=z(n,a),o(C),r.resume()}));else if(l==="object")o({interpreter:R(n,d.checkArity,a),completion:Object.keys(n)});else{if(l==="undefined")n=$.noop;else if(l!=="function"){var O=l+" is invalid interpreter value";throw new $.terminal.Exception(O)}o({interpreter:n,completion:d.completion})}}function E(n,a){var o=get_type(a)==="boolean"?"login":a;return function(l,c,C){r.pause(d.softPause),$.jrpc({url:n,method:o,params:[l,c],request:function(k,S){try{d.request.call(r,k,S,r)}catch(O){x(O,"USER")}},response:function(k,S){try{d.response.call(r,k,S,r)}catch(O){x(O,"USER")}},success:function(S){!S.error&&S.result?C(S.result):C(null),r.resume()},error:P})}}function x(n,a,o){is_function(d.exceptionHandler)?d.exceptionHandler.call(r,n,a):(r.exception(n,a),o||setTimeout(function(){throw n},0))}function V(n){function a(l,c,C,k,S,O,A){function H(b,N){return"[["+[c+(b||""),C,k,S,N||O].join(";")+"]"}function I(b){return"]"+H("!",b)+b+"]"+H()}if(!c.match(/!/)){var Y=A.match(email_full_re)||A.match(url_full_re);if(Y)return H("!",Y[1])+A+"]";if(A.match(email_re)||A.match(url_nf_re)){var ae=A.replace(email_re,I).replace(url_nf_re,I);return H("",O)+ae+"]"}}return l}function o(l){return l.replace(email_re,"[[!;;]$1]").replace(url_nf_re,"[[!;;]$1]")}return $.terminal.have_formatting(n)?$.terminal.format_split(n).map(function(l){return $.terminal.is_formatting(l)?l.replace(format_parts_re,a):o(l)}).join(""):o(n)}function w(n,a){return(strlen(text(n))>a.cols||n.match(/\n/))&&(d.wrap===!0&&a.wrap===undefined||d.wrap===!1&&a.wrap===!0)}var ie;"Map"in root&&(ie=new Map);function ue(n,a,o){return o.exec||a.options.clear_exec?$.terminal.each_extended_command(n,function(l){if(o.exec){a.options.exec=!1,a.options.clear_exec=!0;var c=l.trim();tt&&tt===c?(tt="",r.error(de().recursiveLoop)):(tt=c,$.terminal.extended_command(r,l,{invokeMethods:o.invokeMethods}).then(function(){tt=""}))}}):n}function j(n){try{var a=!is_function(n.value),o=$.extend({exec:!0,raw:!1,finalize:$.noop,useCache:a,invokeMethods:!1,formatters:!0,convertLinks:d.convertLinks},n.options||{}),l=G(n.value);if(l&&is_function(l.then))return l.then(function(Y){j($.extend(n,{value:Y,options:o}))});if(l!==""){if(!o.raw){if(d.useCache&&o.useCache){var c=l;if(ie&&ie.has(c)){var C=ie.get(c);return Oe.append(C.input,n.index,o,C.raw),!0}}if(o.formatters)try{l=$.terminal.apply_formatters(l,$.extend(d,{echo:!0}))}catch(Y){x(Y,"FORMATTING")}if(l=ue(l,n,o),l==="")return;o.convertLinks&&(l=V(l));var k=l;l=crlf($.terminal.normalize(l)),l=$.terminal.encode(l,{tabs:d.tabs});var S,O,A=o.cols=r.cols();w(l,o)?(S=$.terminal.split_equal(l,A,{keepWords:o.keepWords,trim:!0}),O=$.terminal.split_equal(k,A,{keepWords:o.keepWords,trim:!0})):l.match(/\n/)&&(S=l.split(/\n/),O=l.split(/\n/))}}else k="";var H=S||l,I=O||k;ie&&c&&a&&ie.set(c,{input:H,raw:I}),Oe.append(H,n.index,o,I)}catch(Y){Oe.clear(),is_function(d.exceptionHandler)?d.exceptionHandler.call(r,Y,"TERMINAL"):alert_exception("[Internal Exception(process_line)]",Y)}return!0}function pe(n){if(n=$.extend({},{update:!1,scroll:!0},n||{}),!n.update){U.resize(Ue);var a=qe.empty().detach()}try{Oe.clear(),unpromise(ye.render(r.rows(),function(o){return o.map(j)}),function(){r.flush(n),n.update||U.before(a),ce("onAfterRedraw")})}catch(o){is_function(d.exceptionHandler)?d.exceptionHandler.call(r,o,"TERMINAL (redraw)"):alert_exception("[redraw]",o)}}function se(){if(d.outputLimit>=0){var n;d.outputLimit===0?n=r.rows():n=d.outputLimit;var a=qe.find("> div > div");if(a.length+1>n){var o=a.length-n+1,l=a.slice(0,o),c=l.parent();l.remove(),c.each(function(){var C=$(this);C.is(":empty")&&(ye.unmount(C),C.remove())}),ye.limit_snapshot(o)}}}function Q(){d.greetings===undefined?r.echo(r.signature,{finalize:a11y_hide,formatters:!1}):d.greetings&&(is_string(d.greetings)?r.echo(d.greetings):is_function(d.greetings)?r.echo(function(){try{var n=new $.Deferred,a=d.greetings.call(r,n.resolve);return a&&n.resolve(a),n.promise()}catch(o){d.greetings=null,x(o,"greetings")}}):r.error(de().wrongGreetings))}function re(n){var a=U.mask();switch(typeof a){case"string":return n.replace(/./g,a);case"boolean":return a?n.replace(/./g,d.maskChar):$.terminal.escape_formatting(n)}throw new $.terminal.Exception(de().invalidMask)}function ee(n){typeof n>"u"&&(n=r.get_command());var a=U.prompt(!0);n=re(n);var o={exec:!1,formatters:!1,convertLinks:!1,finalize:function(c){a11y_hide(c.addClass("terminal-command")),ce("onEchoCommand",[c,n])}};n=$.terminal.apply_formatters(n,{command:!0}),r.echo(a+n,o)}function Z(){return Ve.outerWidth()!==r.outerWidth()}function Fe(n){var a=terminals.get()[n[0]];if(!a)throw new $.terminal.Exception(de().invalidTerminalId);var o=n[1];if(save_state[o])a.import_view(save_state[o]);else{change_hash=!1;var l=n[2];l&&a.exec(l).done(function(){change_hash=!0,save_state[o]=a.export_view()})}}var Pe=["AbortError","TimeoutError"];function ke(n){return function(a){Pe.includes(a.name)&&!d.errorOnAbort||r.error("["+n+"] "+(a.message||a)).resume()}}function Xe(){change_hash&&(fire_hash_change=!1,location.hash="#"+JSON.stringify(hash_commands),setTimeout(function(){fire_hash_change=!0},100))}var Me=!0,Be=[];function ve(n,a,o){function l(){(d.historyState||d.execHash&&o)&&(save_state.length?r.save_state(null):r.save_state())}function c(){o||(change_hash=!0,d.historyState&&r.save_state(n,!1),change_hash=ae)}function C(){Y.resolve(),ce("onAfterCommand",[n])}function k(N,W){typeof N<"u"&&F(N),C(),W&&r.resume()}function S(N){return is_function(N.done||N.then)&&Ee}var O=ke("Command");function A(N){O(N),abort_controllers=[]}function H(){var N=I.interpreter.call(r,n,r);if(c(),N)return Je||(S(N)?Te=!0:is_promise(N)&&r.pause(d.softPause)),Je=!1,is_function(N.done||N.then)?unpromise(N,function(W){k(W,!0),abort_controllers=[]},A):$.when(N).done(k).catch(A);if(o&&U.refresh(),Te?Be.push(function(){C()}):C(),o)return Y.promise()}Me&&(Me=!1,l());try{if(ce("onBeforeCommand",[n])===!1)return;o?(tt=n.trim(),et=$.terminal.split_command(tt)):et=$.terminal.split_command(n),Ye()||o&&(is_function(d.historyFilter)&&d.historyFilter(n)||n.match(d.historyFilter))&&U.history().append(n);var I=me.top();!a&&d.echoCommand&&ee(n);var Y=new $.Deferred,ae=change_hash;if(n.match(/^\s*login\s*$/)&&r.token(!0))c(),r.level()>1?r.logout(!0):r.logout(),C();else if(d.exit&&n.match(/^\s*exit\s*$/)&&!Ae){c();var b=r.level();(b===1&&r.get_token()||b>1)&&(r.get_token(!0)&&r.set_token(undefined,!0),r.pop()),C()}else if(d.clear&&n.match(/^\s*clear\s*$/)&&!Ae)c(),r.clear(),C();else return H();return Y.promise()}catch(N){if(x(N,"USER",o),r.resume(),o)throw N}}function bt(){ce("onBeforeLogout",[],!0)!==!1&&(Ot(),ce("onAfterlogout",[],!0),r.login(q,!0,ut))}function Ot(){var n=r.prefix_name(!0)+"_";be.remove(n+"token"),be.remove(n+"login")}function ir(n){var a=r.prefix_name()+"_interpreters",o=be.get(a);o?o=JSON.parse(o):o=[],$.inArray(n,o)===-1&&(o.push(n),be.set(a,JSON.stringify(o)))}function We(n){var a=me.top(),o=r.prefix_name(!0);Ye()||ir(o);var l=r.login_name(!0);U.name(o+(l?"_"+l:""));var c=a.prompt;is_function(c)&&(c=fe(c));var C=is_function(a.prompt);(C||c!==U.prompt())&&(C&&U.prompt(""),U.prompt(a.prompt)),typeof a.history<"u"&&r.history().toggle(a.history),$.isPlainObject(a.keymap)&&U.keymap(null).keymap($.extend({},ge,$.omap(a.keymap,function(k,S){return function(){var O=[].slice.call(arguments);try{return S.apply(r,O)}catch(A){x(A,"USER KEYMAP")}}}))),U.set(""),!n&&is_function(a.onStart)&&a.onStart.call(r,r)}function ce(n,a,o){a=(a||[]).concat([r]);var l=me&&me.top();if(l&&is_function(l[n])&&!o)try{return l[n].apply(r,a)}catch(c){delete l[n],x(c,n)}else if(is_function(d[n]))try{return d[n].apply(r,a)}catch(c){d[n]=null,x(c,n)}}var Lt=function(){function n(a){if(!a)try{return r.scroll_to(r.find(".cmd-cursor-line")),!0}catch{return!0}}return typeof global<"u"&&typeof global.it=="function"?n:debounce(n,100,{leading:!0,trailing:!1})}();function Ft(){var n=r.find(".cmd-cursor-line");return n.is_fully_in_viewport(r).then(Lt)}function He(n){if(typeof history<"u"&&history.replaceState){var a="#"+JSON.stringify(n),o=location.href.replace(/#.*$/,a);history.replaceState(null,"",o)}}function Dt(){if(fire_hash_change&&d.execHash)try{if(location.hash){var n=location.hash.replace(/^#/,"");hash_commands=JSON.parse(decodeURIComponent(n))}else hash_commands=[];hash_commands.length?Fe(hash_commands[hash_commands.length-1]):save_state[0]&&r.import_view(save_state[0])}catch(a){x(a,"TERMINAL")}}function ut(){We(),Tt.resolve(),Q()}function at(){ye.length&&Ze.length&&$.when.apply($,Ze);function n(){St=$.noop,!a&&r.enabled()&&r.resume(!0)}var a=!1;if(is_function(d.onInit)){St=function(){a=!0};var o;try{o=d.onInit.call(r,r)}catch(l){x(l,"OnInit")}finally{is_promise(o)?o.then(n).catch(function(l){x(l,"OnInit"),n()}):n()}}first_instance&&(first_instance=!1,$(window).on("hashchange",Dt))}function Ye(){return Ae||U.mask()!==!1}function dt(n){var a,o=me.top();if(is_function(o.keydown)){if(a=o.keydown.call(r,n,r),a!==undefined)return a}else if(is_function(d.keydown)&&(a=d.keydown.call(r,n,r),a!==undefined))return a}var Et={"CTRL+D":function(n,a){return Ae||(U.get()===""?me.size()>1||is_function(q)?r.pop(""):r.resume():a()),!1},"CTRL+C":function(){return with_selection(function(n){if(n===""){var a=r.get_command(),o=r.get_position();a=a.slice(0,o)+"^C"+a.slice(o+2),ee(a),r.set_command("")}else{var l=r.find("textarea");text_to_clipboard(l,process_selected_html(n))}}),!1},"CTRL+L":function(){return r.clear(),!1},TAB:function(n,a){var o=me.top(),l,c;typeof o.caseSensitiveAutocomplete<"u"?c=o.caseSensitiveAutocomplete:c=d.caseSensitiveAutocomplete,d.completion&&get_type(d.completion)!=="boolean"&&o.completion===undefined?l=d.completion:l=o.completion,l==="settings"&&(l=d.completion);function C(A){A=A.slice(),r.before_cursor(!1).match(/\s/)||(d.clear&&$.inArray("clear",A)===-1&&A.push("clear"),d.exit&&$.inArray("exit",A)===-1&&A.push("exit")),r.complete(A,{echo:!0,word:d.wordAutocomplete,escape:d.completionEscape,caseSensitive:c,echoCommand:d.doubleTabEchoCommand,doubleTab:d.doubleTab})}if(l)switch(get_type(l)){case"function":var k=r.before_cursor(d.wordAutocomplete);if(l.length===3){var S=new Error(de().comletionParameters);return x(S,"USER"),!1}var O=l.call(r,k,C);unpromise(O,C,ke("Completion"));break;case"array":C(l);break;default:throw new $.terminal.Exception(de().invalidCompletion)}else a();return!1},"CTRL+V":function(n,a){return a(n),r.oneTime(200,function(){r.scroll_to_bottom()}),!0},"CTRL+TAB":function(){if(terminals.length()>1)return r.focus(!1),!1},PAGEDOWN:function(){r.scroll(r.height())},PAGEUP:function(){r.scroll(-r.height())}};function wt(n){var a,o;if(Ee)return!1;if(r.enabled())if(r.paused()){if(!d.pauseEvents&&(a=dt(n),a!==undefined))return a;if(n.which===68&&n.ctrlKey){if(d.pauseEvents&&(a=dt(n),a!==undefined))return a;if(r.abort(),requests.length){for(o=requests.length;o--;){var l=requests[o];if(l.readyState!==4)try{l.abort()}catch{is_function(d.exceptionHandler)?d.exceptionHandler.call(r,n,"AJAX ABORT"):r.error(de().ajaxAbortError)}}requests=[]}r.resume()}return!1}else{if(a=dt(n),a!==undefined)return a;n.which!==9&&(vt=0)}}function $t(n){var a=me.top();if(Ce&&(!Te||!d.pauseEvents)){if(is_function(a.keypress))return a.keypress.call(r,n,r);if(is_function(d.keypress))return d.keypress.call(r,n,r)}}function ot(n,a){return function(l,c){var C=$.terminal.apply_formatters(l,{animation:!0});C=$.terminal.normalize(C);var k=!1;if(c&&typeof c.keepWords<"u"&&(k=c.keepWords),a)var S=$.terminal.split_equal(C,r.cols(),{keepWords:k});Ee=!0;var O=r.get_prompt(),A=0,H=$.terminal.length(C);if(H>0){var I="";c.prompt?I=$.terminal.apply_formatters(c.prompt,{prompt:!0}):r.set_prompt("");var Y=r.is_bottom(),ae=0;if(a)var b=S.map(function(K){return{formatted:K,chars:$.terminal.partition(K,{wrap:!1}),len:$.terminal.length(K)}});else var N=$.terminal.partition(C,{wrap:!1});var W,X=setInterval(function(){var K,_e,xe;if(zt){r.skip_stop();var Wt=$.terminal.substring(C,A,H);I+=Wt,U.prompt(I,{formatters:!1}),W=!0}else{if(a?(K=b[ae].formatted,_e=b[ae].chars,xe=b[ae].len):(K=C,_e=N,xe=H),xe===0)U.prompt("");else{var De=_e[A];if(c.mask){var Re=U.mask();typeof Re=="string"?De=Re:Re&&(De=d.maskChar)}I+=De,U.prompt(I,{formatters:!1}),Y&&(De===`
`||!r.is_bottom())&&r.scroll_to_bottom(),A++}if(A===xe&&a){var it=r.last_index();ae===b.length-1?r.set_prompt(O):r.set_prompt("");var Rt=!!qe.find(".partial").length;r.echo(K,$.extend({},c,{formatters:!1,finalize:null,typing:!1})),b[ae].index=it+1,I="",++ae,A=0}}W||(a?W=ae===b.length:W=A===H),W&&(clearInterval(X),setTimeout(function(){if(Rt||c.newline===!1){var Ht=r.last_index(),qt=qe.find('[data-index="'+Ht+'"]');c.finalize(qt)}else a&&b.forEach(function(Zt){typeof Zt.index<"u"&&r.remove_line(Zt.index)}),n(l,O,c);Ee=!1},c.delay))},c.delay)}}}var It=ot(function(n,a,o){r.set_prompt(n),o.finalize()},!0),Jt=function(){var n=ot(function(a,o,l){r.set_prompt(o),r.insert(a),l.finalize()});return function(a,o,l){return n(o,$.extend({},l,{prompt:a+r.get_command()}))}}(),Vt=ot(function(n,a,o){r.set_prompt(a),r.echo(n,$.extend({},o,{typing:!1}))},!0),Yt=function(){var n=ot(function(a,o,l){r.set_prompt(o),with_prompt(o,function(c){var C=re(a);c=$.terminal.apply_formatters(c,{prompt:!0}),C=$.terminal.apply_formatters(C,{command:!0});var k=c+C;l=$.extend({},l,{typing:!1,formatters:!1,convertLinks:!1}),r.echo(k,l)},r)});return function(a,o,l){return n(o,$.extend({},l,{prompt:a,mask:!0}))}}();function jt(n,a,o){return function(c,C){var k=new $.Deferred;return $e(function(){var O=$.extend({typing:!1,delay:d.execAnimationDelay},C);if(O.typing){if(typeof c!="string")return k.reject(n+": Typing animation require string");if(typeof O.delay!="number"||isNaN(O.delay))return k.reject(n+": Invalid argument, delay need to be a number");var A=r.typing(n,O.delay,c,O);A.then(function(){k.resolve()})}else a(c,O);is_function(o)&&o(c,O)}),C&&C.typing?k.promise():r}}function mt(n,a,o){var l=ce("onBeforeLogin",[n,a]);return unpromise(defined(l),o,"validate_login")}function kt(n,a,o,l){d.history&&U.history().disable();var c=r.level();S();function C(){for(;r.level()>c;)r.pop(undefined,!0);d.history&&U.history().enable()}function k(A,H){var I=r.prefix_name(!0)+"_";be.set(I+"token",H),be.set(I+"login",A)}function S(){var A=r.prefix_name(!0)+"_";be.remove(A+"token"),be.remove(A+"login")}function O(A,H,I){we(function(){var ae;H?(C(),k(A,H),Ae=!1,ce("onAfterLogin",[A,H]),ae=o):(a?(I||r.error(de().wrongPasswordTryAgain),r.pop(undefined,!0).set_mask(!1)):(Ae=!1,I||r.error(de().wrongPassword),r.pop(undefined,!0).pop(undefined,!0)),ae=l),r.paused()&&r.resume(),is_function(ae)&&ae(),r.off("terminal.autologin")})}r.on("terminal.autologin",function(A,H,I,Y){mt(H,I,function(ae){ae!==!1&&O(H,I,Y)})}),r.push(function(A){r.set_mask(d.maskChar).push(function(H){try{mt(A,H,function(I){if(I===!1){C();return}r.pause();try{var Y=[A,H,function(b,N){O(A,b,N)}],ae=n.apply(r,Y);unpromise(ae,function(b){O(A,b)},function(b){r.pop(undefined,!0).pop(undefined,!0),r.error(b.message),is_function(l)&&l(),r.paused()&&r.resume(),r.off("terminal.autologin")})}catch(b){x(b,"AUTH")}})}catch(I){x(I,"AUTH")}},{prompt:de().password+": ",name:"password"})},{prompt:de().login+": ",name:"login"})}function At(n){return function(a){n.add(a)}}function de(){return $.extend({},$.terminal.defaults.strings,d&&d.strings||{})}function Qt(n,a){return parseInt(n.getPropertyValue(a),10)||0}function Gt(){var n=window.getComputedStyle(Ve[0]);function a(k){return Qt(n,"padding-"+k)}var o=a("left"),l=a("right"),c=a("top"),C=a("bottom");return{top:c,left:o,right:l,bottom:C}}var r=this;if(this.length>1)return this.each(function(){$.fn.terminal.call($(this),t,$.extend({name:r.selector},e))});var st;if(r.is("body,html")){if(r.hasClass("full-screen-terminal")){var Bt=r.find("> .terminal").data("terminal");if(Bt)return Bt}st=r,r=$("<div/>").appendTo("body"),$("body").addClass("full-screen-terminal")}else if(r.data("terminal"))return r.data("terminal");var ft=$.omap({id:function(){return rt},clear:function(){return ce("onClear")!==!1&&(Oe.clear(),ye.clear(function(n){return g(n)}),qe[0].innerHTML="",r.prop({scrollTop:0})),r},export_view:function(){var n=ce("onExport");return n=n||{},$.extend({},{focus:Ce,mask:U.mask(),prompt:r.get_prompt(),command:r.get_command(),position:U.position(),lines:clone(ye.data()),interpreters:me.clone(),history:U.history().data},n)},import_view:function(n){if(Ae)throw new Error(sprintf(de().notWhileLogin,"import_view"));return ce("onImport",[n]),$e(function(){r.set_prompt(n.prompt),r.set_command(n.command),U.position(n.position),U.mask(n.mask),n.focus&&r.focus(),ye.import(clone(n.lines).filter(function(o){return o[0]})),n.interpreters instanceof Stack&&(me=n.interpreters),d.importHistory&&U.history().set(n.history),pe()}),r},save_state:function(n,a,o){if(typeof o<"u"?save_state[o]=r.export_view():save_state.push(r.export_view()),Array.isArray(hash_commands)||(hash_commands=[]),n!==undefined&&!a){var l=[rt,save_state.length-1,n];hash_commands.push(l),Xe()}return r},exec:function(n,a,o){function l(k){var S=ve(n,k,!0);unpromise(S,function(){et=null,C.resolve()},function(){et=null,C.reject()})}a&&typeof a=="object"&&(o=a,a=null);var c=$.extend({deferred:null,silent:!1,typing:!1,delay:d.execAnimationDelay},o);a===null&&(a=c.silent),is_deferred(c.deferred)||(c.deferred=new $.Deferred);var C=c.deferred;return we(function(){if(Array.isArray(n))(function A(){var H=n.shift();H?r.exec(H,a,o).done(A):C.resolve()})();else if(Te)ct.push([n,a,c]);else if(c.typing&&!a){var S=c.delay;Te=!0;var O=r.typing("enter",S,n,{delay:S});O.then(function(){Te=!1,l(!0)}),C.then(function(){Te=!1})}else l(a)}),C.promise()},autologin:function(n,a,o){return r.trigger("terminal.autologin",[n,a,o]),r},login:function(n,a,o,l){if(gt.push([].slice.call(arguments)),Ae)throw new Error(sprintf(de().notWhileLogin,"login"));if(!is_function(n))throw new Error(de().loginIsNotAFunction);if(Ae=!0,r.token()&&r.level()===1&&!Nt)Ae=!1,r.logout(!0);else{var c=r.token(!0),C=r.login_name(!0);c&&C?(Ae=!1,r.pause(),mt(C,c,function(k){k!==!1?is_function(o)&&o():(r.resume(),kt(n,a,o,l))})):kt(n,a,o,l)}return r},settings:function(){return d},before_cursor:function(n){var a=U.position(),o=U.get().slice(0,a),l=o.split(/\s/),c;if(n)if(l.length===1)c=l[0];else{var C=o.match(/(\\?")/g),k=C?C.filter(function(A){return!A.match(/^\\/)}).length:0;C=o.match(/'/g);var S=C?C.length:0;if(S%2===1)c=o.match(/('[^']*)$/)[0];else if(k%2===1)c=o.match(/("(?:[^"]|\\")*)$/)[0];else for(c=l[l.length-1],_=l.length-1;_>0;_--){var O=l[_-1];if(O[O.length-1]==="\\")c=l[_-1]+" "+c;else break}}else c=o;return c},complete:function(n,a){a=$.extend({word:!0,echo:!1,escape:!0,echoCommand:!1,caseSensitive:!0,doubleTab:null},a||{});var o=a.caseSensitive,l=r.before_cursor(a.word).replace(/\\"/g,'"'),c=!1;if(a.word&&(l.match(/^"/)?c='"':l.match(/^'/)&&(c="'"),c&&(l=l.replace(/^["']/,""))),vt%2===0)_t=r.before_cursor(a.word);else{var C=r.before_cursor(a.word);if(C!==_t)return}var k=$.terminal.escape_regex(l);a.escape&&(k=k.replace(/(\\+)(["'() ])/g,function(W,X,K){return K.match(/[()]/)?X+"\\?\\"+K:X+"?"+K}));function S(W){return c==='"'&&(W=W.replace(/"/g,'\\"')),!c&&a.escape&&(W=W.replace(/(["'() ])/g,"\\$1")),W}function O(){for(var W=[],X=n.length;X--;)if(n[X].match(/\n/)&&a.word&&warn("If you use commands with newlines you should use word option for complete or wordAutocomplete terminal option"),H.test(n[X])){var K=S(n[X]);!o&&same_case(K)&&(l.toLowerCase()===l?K=K.toLowerCase():l.toUpperCase()===l&&(K=K.toUpperCase())),W.push(K)}return W}var A=o?"":"i",H=new RegExp("^"+k,A),I=O();function Y(W,X){var K=r.get_command(),_e=r.get_position(),xe=new RegExp("^"+W,"i"),De=K.slice(0,_e),Re=K.slice(_e),it=X.replace(xe,"")+(c||"");r.set_command(De+it+Re),r.set_position((De+it).length)}if(I.length===1)return a.escape?Y(k,I[0]):r.insert(I[0].replace(H,"")+(c||"")),_t=r.before_cursor(a.word),!0;if(I.length>1)if(++vt>=2){if(vt=0,a.echo){if(is_function(a.doubleTab)){a.echoCommand&&ee();var ae=a.doubleTab.call(r,l,I,ee);return typeof ae>"u"?!0:ae}else if(a.doubleTab!==!1){ee();var b=I.slice().reverse().join("		");r.echo($.terminal.escape_brackets(b),{keepWords:!0,formatters:!1})}return!0}}else{var N=common_string(S(l),I,o);if(N)return Y(k,N),_t=r.before_cursor(a.word),!0}},commands:function(){return me.top().interpreter},set_interpreter:function(n,a){var o=$.Deferred();function l(){r.pause(d.softPause),B(n,a,function(c){r.resume();var C=me.top();$.extend(C,c),We(!0),o.resolve()})}return is_function(a)?r.login(a,!0,l):get_type(n)==="string"&&a?r.login(E(n,a),!0,l):l(),o.promise()},greetings:function(){return Q(),r},paused:function(){return Te},pause:function(n){return we(function(){St(),Te=!0,U.disable(n||is_android),n||U.find(".cmd-prompt").hidden(),ce("onPause")}),r},resume:function(n){return we(function(){Te=!1,Ce&&terminals.front()===r&&U.enable(n),U.find(".cmd-prompt").visible();var o=ct;ct=[];for(var l=0;l<o.length;++l)r.exec.apply(r,o[l]);r.trigger("resume");var c=Be.shift();c&&c(),ce("onResume")!==!1&&r.scroll_to_bottom()}),r},signal:function(){var n=new AbortController;return abort_controllers.push(n),n.signal},timeout:function(n){var a=new AbortController,o=new Error(de().timeoutError);o.name="TimeoutError",abort_controllers.push(a);var l=a.signal;return setTimeout(function(){l.aborted||a.abort(o)},n),l},abort:function(n){if(abort_controllers.length){var a=new Error(n||de().abortError);a.name="AbortError";for(var o=abort_controllers.length;o--;){var l=abort_controllers[o];l.signal.aborted||l.abort(a)}abort_controllers=[]}return r},skip:function(){return zt=!0,r},skip_stop:function(){return zt=!1,r},animating:function(){return Ee},cols:function(){return d.numChars?d.numChars:((!Ue||Ue===1e3)&&(Ue=get_num_chars(r,Se)),Ue)},rows:function(){return d.numRows?d.numRows:(ze||(ze=get_num_rows(r,Se)),ze)},history:function(){return U.history()},geometry:function(){var n=Gt();return{terminal:{padding:{left:n.left,right:n.right,top:n.top,bottom:n.bottom},width:nt+n.left+n.right,height:lt+n.top+n.bottom},density:je,char:Se,cols:this.cols(),rows:this.rows()}},history_state:function(n){function a(){d.historyState=!0,save_state.length?terminals.length()>1&&r.save_state(null):r.save_state()}return n?typeof window.setImmediate>"u"?setTimeout(a,0):setImmediate(a):d.historyState=!1,r},clear_history_state:function(){return hash_commands=[],save_state=[],r},next:function(){if(terminals.length()===1)return r;terminals.front().disable();var n=terminals.rotate().enable(),a=n.offset().top-50;$("html,body").animate({scrollTop:a},500);try{trigger_terminal_change(n)}catch(o){x(o,"onTerminalChange")}return n},focus:function(n,a){return we(function(){if(terminals.length()===1)n===!1?r.disable(a):r.enable(a);else if(n===!1)r.next();else{var l=terminals.front();if(l!==r&&(terminals.forEach(function(c){c!==r&&c.enabled()&&c.disable(a)}),!a))try{trigger_terminal_change(r)}catch(c){x(c,"onTerminalChange")}terminals.set(r),r.enable(a)}}),r},blur:function(n){return this.focus(!1,n)},freeze:function(n){return $e(function(){n?(r.disable(),Ke=!0):(Ke=!1,r.enable())}),r},frozen:function(){return Ke},enable:function(n){return!Ce&&!Ke&&(Ue===undefined&&r.resize(),we(function(){var o;!n&&!Ce&&ce("onFocus"),(!n&&o===undefined||n)&&(Ce=!0,r.paused()||U.enable(!0))})),r},clear_cache:"Map"in root?function(){return Oe.clear_cache(),ie.clear(),U.clear_cache(),r}:function(){return r},disable:function(n){return we(function(){var o;!n&&Ce&&(o=ce("onBlur")),(!n&&o===undefined||n)&&(Ce=!1,U.disable())}),r},enabled:function(){return Ce},signature:function(){for(var n=r.cols(),a=signatures.length;a--;){var o=signatures[a].map(function(l){return l.length});if(Math.max.apply(null,o)<=n)return signatures[a].join(`
`).replace(/\s+$/m,"")+`
`}return""},version:function(){return $.terminal.version},cmd:function(){return U},get_command:function(){return U.get()},enter:jt("enter",ee),set_command:function(n,a){return $e(function(){typeof n!="string"&&(n=JSON.stringify(n)),U.set(n,undefined,a)}),r},set_position:function(n,a){return $e(function(){U.position(n,a)}),r},get_position:function(){return U.position()},insert:function(n,a){if(typeof n=="string"){var o,l={stay:!1,typing:!1,delay:100};is_object(a)||(a={stay:a}),o=$.extend(l,a);var c=new $.Deferred;return $e(function(){function k(){(d.scrollOnEcho||S)&&r.scroll_to_bottom()}var S=r.is_bottom();if(o.typing){var O=o.delay,A=r.typing("insert",O,n,d);A.then(function(){k(),c.resolve()})}else U.insert(n,d.stay),k()}),o.typing?c.promise():r}else throw new Error(sprintf(de().notAString,"insert"))},set_prompt:jt("prompt",function(n){is_function(n)?U.prompt(function(a){return n.call(r,a,r)}):U.prompt(n)},function(n){me.top().prompt=n}),get_prompt:function(){return me.top().prompt},set_mask:function(n){return $e(function(){U.mask(n===!0?d.maskChar:n)}),r},get_mask:function(){return U.mask()},get_output:function(n){return n?ye.data():ye.get_snapshot()},resize:function(n,a){if(!r.is(":visible"))r.stopTime("resize"),r.oneTime(500,"resize",function(){r.resize(n,a)});else{if(n&&a&&(r.width(n),r.height(a)),n=r.width(),a=r.height(),typeof d.numChars<"u"||typeof d.numRows<"u"){typeof d.numChars<"u"&&(U.resize(d.numChars),r.refresh()),ce("onResize");return}var o=get_num_chars(r,Se),l=get_num_rows(r,Se);if(o!==Ue||l!==ze){r.clear_cache();var c=o!==Ue;Ue=o,ze=l,c&&(U.resize(Ue),r.refresh()),ce("onResize")}}return r},refresh:function(){return Se.width!==0&&css(r[0],{"--char-width":Se.width,"--pixel-density":je}),r.clear_cache(),_t&&U.resize(),pe({scroll:!1,update:!0}),r},flush:function(n){return n=$.extend({},{update:!1,scroll:!0},n||{}),$e(function(){try{if(Oe.is_empty())return r;var o=r.is_bottom(),l=d.scrollOnEcho&&n.scroll||o,c,C=!0,k=!1,S=$(),O,A=[];n.update||(S=r.find(".partial"),O=ye.get_partial()),Oe.flush(function(b){if(!b)S.length?C&&(C=!1,k=!0,c=S):(c=$("<div/>"),O=[]);else if(is_function(b.finalize)){if(n.update&&b.raw===!0&&b.newline)return;if(l&&c.find("img").on("load",function(){r.scroll_to_bottom()}),n.update){ye.update_snapshot(b.index,O);var N=g(b.index);N.html()!==c.html()&&N.replaceWith(c)}else c.appendTo(qe),S.length||ye.make_snapshot(O);c.attr("data-index",b.index),k=!b.newline,c.toggleClass("partial",k),A.push({node:c,finalize:b.finalize}),k?S=c:b.newline&&S.length&&(c=$("<div/>"),S=$())}else{var W=b.line,X;typeof b.raw=="string"&&(k?O[O.length-1]+=b.raw:O.push(b.raw)),k?(X=c.children().last().append(W),k=!1):(X=$("<div/>").html(W),b.newline&&X.addClass("cmd-end-line"),c.append(X)),X.css("width","100%")}}),S=r.find(".partial");var H=$.terminal.length(O[O.length-1]);H%=r.cols(),A.forEach(function(b){b.finalize(b.node)});var I;if(S.length===0)css(U[0],{"--prompt-offset":"",top:""}),U.__set_prompt_margin(0),I=r.find(".terminal-output div:last-child div:last-child"),I.css("display")==="inline-block"&&I.css({width:"100%",display:""});else if(O.length){I=S.children().last();var Y=I[0].getBoundingClientRect(),ae=is_ch_unit_supported?H+"ch":H+"px";css(U[0],{top:-Y.height/je+"px","--prompt-offset":ae}),U.__set_prompt_margin(H)}se(),ce("onFlush"),r.stopTime("flush").oneTime(10,"flush",function(){var b=r.find(".cmd-cursor"),N=r.find(".cmd").offset(),W=r.offset(),X=qe.height(),K=U.height();css(r[0],{"--terminal-height":r.height(),"--terminal-x":N.left-W.left,"--terminal-y":N.top-W.top,"--terminal-scroll":he.prop("scrollTop"),"--cmd-top":X,"--cmd-height":K}),Ce&&!is_mobile&&!n.update&&(b.hide(),r.oneTime(1,"flush",function(){b.show()}))}),c.on_load({done:function(){l&&r.scroll_to_bottom()}})}catch(b){if(is_function(d.exceptionHandler))try{d.exceptionHandler.call(r,b,"TERMINAL (Flush)")}catch(N){d.exceptionHandler=$.noop,alert_exception("[exceptionHandler]",N)}else alert_exception("[Flush]",b)}finally{Oe.clear()}}),r},update:function(n,a,o){return $e(function(){if(n<0&&(n=ye.length()+n),!ye.valid_index(n))r.error("Invalid line number "+n);else if(a===null)ye.update(n,null),g(n).remove();else{if(a=D(a,{update:!0,line:n}),a===!1)return r;unpromise(a,function(c){var C=p(c,o);C&&(c=C[0],o=C[1]),o=ye.update(n,c,o);var k=j({value:c,index:n,options:o});unpromise(k,function(){r.flush({scroll:!1,update:!0})})})}}),r},remove_line:function(n){return r.update(n,null)},last_index:function(){return ye.length()-1},echo:function(n,a,o){var l=arguments.length>0,c=o||new $.Deferred;function C(){ht=!1;var H=Ze;Ze=[];for(var I=0;I<H.length;++I)r.echo.apply(r,H[I])}function k(H){C(),x(H,"ECHO",!0)}function S(H){try{var I=$.extend({flush:!0,exec:!0,raw:d.raw,finalize:$.noop,unmount:$.noop,delay:d.execAnimationDelay,ansi:!1,typing:!1,externalPause:!0,keepWords:!1,invokeMethods:d.invokeMethods,onClear:null,formatters:!0,allowedAttributes:d.allowedAttributes,newline:!0},a||{}),Y=d.externalPause&&I.externalPause;if(function(W){y(H)||(I.finalize=function(X){I.raw&&X.addClass("raw"),I.ansi&&X.addClass("ansi");try{is_function(W)&&W.call(r,X),X.on_load({error:function(K){K.replaceWith(use_broken_image),Y&&r.resume()},done:function(K){K&&Y&&r.resume()},load:function(K){K&&Y&&r.pause()}})}catch(K){x(K,"USER:echo(finalize)"),W=null}})}(I.finalize),I.flush&&(Oe.empty()||r.flush()),ce("onBeforeEcho",[H])===!1)return;if(I.typing){if(typeof H!="string")return c.reject("echo: Typing animation require string or promise that resolve to string");if(typeof I.delay!="number"||isNaN(I.delay))return c.reject("echo: Invalid argument, delay need to be a number");var ae=r.typing("echo",I.delay,H,I);ae.then(function(){c.resolve()});return}var b;if(typeof H=="function")b=H.bind(r);else if(typeof H>"u"){if(l)return r;b=""}else{var N=D(H);if(N===!1)return r;b=N}is_promise(b)&&(ht=!0),unpromise(b,function(W){if(!(typeof W>"u"||is_promise(N)&&W===!1)&&!h(W,I)){var X=ye.length(),K=ye.has_newline();K||X--,!I.newline&&W[W.length-1]===`
`&&(W=W.slice(0,-1),I.newline=!0);var _e=j({value:W,options:I,index:X});is_promise(_e)&&(ht=!0),ye.push([W,I]),unpromise(_e,function(){var xe=r.find(".partial").length,De=I.flush&&xe;I.flush&&(r.flush(),xe&&r.oneTime(1,"echo",function(){var Re=ye.last_line();Re&&r.update(-1,Re[0],Re[1]),C()}),ce("onAfterEcho",[H])),De||C()},k)}},k)}catch(W){is_function(d.exceptionHandler)?d.exceptionHandler.call(r,W,"TERMINAL (echo)"):alert_exception("[Terminal.echo]",W)}}var O=a&&a.typing;if(ht&&!f){var A=[n,a];O&&A.push(c),Ze.push(A)}else S(n);return O?c.promise():r},typing:function(n,a,o,l){var c=new $.Deferred,C,k;typeof l=="object"?(k=l.finalize||$.noop,C=$.extend({},l,{delay:a,finalize:S})):(k=l||$.noop,C={delay:a,finalize:S});function S(){c.resolve(),is_function(k)&&k.apply(r,arguments)}var O=["prompt","echo","enter","insert"];function A(){return O.indexOf(n)>=0}return $e(function(){A()?n==="prompt"?It(o,C):n==="echo"?Vt(o,C):n==="enter"?with_prompt(r.get_prompt(),function(I){Yt(I,o,C)},r):n==="insert"&&with_prompt(r.get_prompt(),function(I){Jt(I,o,C)},r):c.reject("Invalid type only `echo` and `prompt` are supported")}),c.promise()},error:function(n,a){a=$.extend({},a,{raw:!1,formatters:!1});function o(l){typeof l!="string"&&(l=String(l));var c=$.terminal.escape_brackets(l).replace(/\\$/,"&#92;").replace(url_re,"]$1[[;;;terminal-error]");return"[[;;;terminal-error]"+c+"]"}return typeof n=="function"?r.echo(function(){return o(n.call(r))},a):n&&n.then?(n.then(function(l){r.echo(o(l))}).catch(ke("Echo Error")),r):r.echo(o(n),a)},exception:function(n,a){var o=exception_message(n);if(a&&(o="&#91;"+a+"&#93;: "+o),o&&r.error(o,{finalize:function(c){c.addClass("terminal-exception terminal-message")},keepWords:!0}),typeof n.fileName=="string"){var l=r.paused();l||r.pause(d.softPause),$.get(n.fileName,function(c){var C=n.lineNumber-1,k=c.split(`
`)[C];k&&r.error("["+n.lineNumber+"]: "+k),l||r.resume()},"text")}return n.stack&&r.echo(format_stack_trace(n.stack),{finalize:function(c){c.addClass("terminal-exception terminal-stack-trace")},formatters:!1}),r},scroll:function(n){var a;return n=Math.round(n),r.prop,n>he.prop("scrollTop")&&n>0&&he.prop("scrollTop",0),a=he.prop("scrollTop"),he.scrollTop(a+n),r},logout:function(n){if(Ae)throw new Error(sprintf(de().notWhileLogin,"logout"));return $e(function(){if(n){var o=gt.pop();r.set_token(undefined,!0),r.login.apply(r,o)}else if(me.size()===1&&r.token())r.logout(!0);else for(;me.size()>1;)r.token()?r.logout(!0).pop().pop():r.pop()}),r},token:function(n){return be.get(r.prefix_name(n)+"_token")},set_token:function(n,a){var o=r.prefix_name(a)+"_token";return typeof n>"u"?be.remove(o):be.set(o,n),r},get_token:function(n){return r.token(n)},login_name:function(n){return be.get(r.prefix_name(n)+"_login")},name:function(){return me.top().name},prefix_name:function(n,a){var o=(d.name?d.name+"_":"")+rt;if(n&&me.size()>1){var l=me.map(function(c){return c.name||""}).slice(1,a).join("_");l&&(o+="_"+l)}return o},read:function(n,a,o){var l;if(typeof arguments[1]=="object"?l=$.extend({typing:!1,delay:d.execAnimationDelay,success:$.noop,cancel:$.noop},arguments[1]):l={typing:!1,success:a||$.noop,cancel:o||$.noop},l.signal||(l.signal=r.signal()),l.typing){var c=r.get_prompt();return l.typing=!1,r.typing("prompt",l.delay,n).then(function(){return r.set_prompt(c).read(n,l)})}Je=!0;var C=jQuery.Deferred();if(l.signal.aborted)return C.reject(),C.promise();r.push(function(A){C.resolve(A),is_function(l.success)&&l.success(A),S()},{name:"read",history:!1,prompt:n||"",onStart:function(){l.signal.addEventListener("abort",O)},keymap:{"CTRL+D":function(){return r.abort(),!1}}});function k(A){C.reject(A),is_function(l.cancel)&&l.cancel()}function S(){r.pop(),d.history&&U.history().enable()}function O(){S(),k(l.signal.reason)}return d.history&&U.history().disable(),is_function(l.onReady)&&l.onReady.call(r),C.promise()},push:function(n,a){return we(function(){a=a||{};var l={infiniteLogin:!1},c=$.extend({},l,a);!c.name&&et&&(c.name=et.name),c.prompt===undefined&&(c.prompt=(c.name||">")+" ");var C=me.top();C&&(C.mask=U.mask());var k=Te;function S(){ce("onPush",[C,me.top()]),We()}B(n,a.login,function(O){if(me.push($.extend({},O,c)),c.completion===!0&&(Array.isArray(O.completion)?me.top().completion=O.completion:O.completion||(me.top().completion=!1)),c.login){var A,H=get_type(c.login);H==="function"?(A=c.infiniteLogin?$.noop:r.pop,r.login(c.login,c.infiniteLogin,S,A)):(get_type(n)==="string"&&H==="string"||H==="boolean")&&(A=c.infiniteLogin?$.noop:r.pop,r.login(E(n,c.login),c.infiniteLogin,S,A))}else S();!k&&r.enabled()&&r.resume()})}),r},pop:function(n,a){n!==undefined&&ee(n);var o=r.token(!0),l;if(me.size()===1)l=me.top(),d.login?(a||ce("onPop",[l,null]),bt(),ce("onExit")):r.error(de().canExitError);else{o&&Ot();var c=me.pop();if(l=me.top(),We(),r.set_mask(l.mask),a||ce("onPop",[c,l]),Ae&&r.get_prompt()!==de().login+": "&&(Ae=!1),is_function(c.onExit))try{c.onExit.call(r,r)}catch(C){c.onExit=$.noop,x(C,"onExit")}}return r},option:function(n,a){if(typeof a>"u"){if(typeof n=="string")return d[n];typeof n=="object"&&$.each(n,function(o,l){d[o]=l})}else d[n]=a,n.match(/^num(Chars|Rows)$/)&&pe();return r},invoke_key:function(n){return U.invoke_key(n),r},keymap:function(n,a){if(arguments.length===0)return U.keymap();if(typeof a>"u"){if(typeof n=="string")return U.keymap(n);$.isPlainObject(n)&&(n=$.extend({},ge,$.omap(n||{},function(l,c){return ge[l]?function(C,k){return c.call(r,C,function(){return ge[l](C,k)})}:c.bind(r)})),U.keymap(null).keymap(n))}else if(typeof a=="function"){var o=n;ge[o]?U.keymap(o,function(l,c){return a.call(r,l,function(){return ge[o](l,c)})}):U.keymap(o,a.bind(r))}},level:function(){return me.size()},reset:function(){return $e(function(){for(r.clear();me.size()>1;)me.pop();We(),Q(),at()}),r},purge:function(){return $e(function(){var a=r.prefix_name()+"_",o=be.get(a+"interpreters");o&&$.each(JSON.parse(o),function(l,c){be.remove(c+"_commands"),be.remove(c+"_token"),be.remove(c+"_login")}),U.purge(),be.remove(a+"interpreters")}),r},destroy:function(){return $e(function(){U.destroy().remove(),r.resizer("unbind"),r.touch_scroll("unbind"),Mt.resizer("unbind").remove(),xt.resizer("unbind").remove(),$(document).unbind(".terminal_"+r.id()),$(window).unbind(".terminal_"+r.id()),r.unbind("click mousedown mouseup"),r.removeData("terminal").removeClass("terminal").unbind(".terminal"),d.width&&r.css("width",""),d.height&&r.css("height",""),$(window).off("blur",oe).off("focus",J),r.find(".terminal-fill, .terminal-font, .terminal-font-forcer").remove(),r.stopTime(),terminals.remove(rt),Le&&(Le.unobserve?Le.unobserve(r[0]):clearInterval(Le));var a=r.find(".terminal-scroll-marker");if(Ct&&Ct.unobserve(a[0]),a.remove(),pt&&pt.disconnect(),terminals.length()||$(window).off("hashchange"),is_mobile&&r.off(["touchstart.terminal","touchmove.terminal","touchend.terminal"].join(" ")),qe.remove(),he.remove(),st){var o=$(st);o.attr("class")==="full-screen-terminal"?o.removeAttr("class"):o.removeClass("full-screen-terminal"),r.remove()}Ne=!0}),r},scroll_to:function(n){var a=he.scrollTop()-r.offset().top+$(n).offset().top;return he.scrollTop(a),r},scroll_to_bottom:function(){var n;return r.prop?n=he.prop("scrollHeight"):n=he.attr("scrollHeight"),he.scrollTop(n),r},is_bottom:function(){if(d.scrollBottomOffset===-1)return!1;if(typeof yt=="boolean")return yt;var n,a,o;n=he[0].scrollHeight,a=he[0].scrollTop,o=he[0].offsetHeight;var l=n-d.scrollBottomOffset;return a+o>l},duplicate:function(){var n=$(r);return $.extend(n,ft)},get_output_buffer:function(n){var a=$.extend({html:!1},n),o=[],l=!1;return Oe.forEach(function(c){if(c)if(is_function(c.finalize))l=!c.newline;else{var C;if(a.html?C=c.line:C=c.raw,l){var k=o.length-1;o[k]+=C}else o.push(C)}}),a.html?o.map(function(c){return"<div>"+c+"</div>"}).join(`
`):o.join(`
`)},clear_buffer:function(){return Oe.clear(),r}},function(n,a){return function(){if(Ne&&!d.exceptionHandler)throw new $.terminal.Exception(de().defunctTerminal);try{return a.apply(r,[].slice.apply(arguments))}catch(o){if(n!=="exec"&&n!=="resume"&&x(o,o.type||"TERMINAL",!0),!d.exceptionHandler)throw o}}});if($.extend(r,ft),r.length===0){var ur=sprintf(de().invalidSelector);throw new $.terminal.Exception(ur)}r.data("terminal",r);var Ze=[],ht=!1,et,tt,vt=0,qe,rt=terminals.length(),Je=!1,Ue,ze,_t,gt=new Stack,Pt=new DelayQueue,Ee=!1,zt=!1,Tt=new DelayQueue,$e=At(Tt),we=At(Pt),yt,Ct,Ae=!1,St=$.noop,nt,lt,Qe,ct=[],d=$.extend({},$.terminal.defaults,{name:r.selector,exit:!!(e&&e.login||!e)},e||{});typeof d.width=="number"&&r.width(d.width),typeof d.height=="number"&&r.height(d.height),delete d.formatters;var Ne=!1,Oe=new FormatBuffer(function(n){return{linksNoReferrer:d.linksNoReferrer,linksNoFollow:d.linksNoFollow,anyLinks:d.anyLinks,charWidth:Se.width,useCache:d.useCache,escape:!1,allowedAttributes:n.allowedAttributes||[]}}),ye=new OutputLines(function(){return d}),be=new u(d.memory),Ce=d.enabled,Ke=!1,Te=!1,Nt=!0,me,U,Xt,Le,pt;d.ignoreSystemDescribe===!0&&(d.describe=!1),$(document).bind("ajaxSend.terminal_"+r.id(),function(n,a){requests.push(a)});var he=$('<div class="terminal-scroller"/>').appendTo(r),Ie=$('<div class="terminal-wrapper"/>').appendTo(he);$(broken_image).hide().appendTo(Ie);var Mt=$('<div class="terminal-font">&nbsp;</div>').appendTo(r),xt=$('<div class="terminal-pixel"/>').appendTo(r),Ve=$('<div class="terminal-fill"/>').appendTo(he);qe=$("<div>").addClass("terminal-output").attr("role","log").appendTo(Ie),r.addClass("terminal");var je=ne(),Se=get_char_size(r),s=!terminal_ready(r);d.login&&ce("onBeforeLogin")===!1&&(Nt=!1);var v;if(typeof t=="string")v=t;else if(is_array(t)){for(var _=0,T=t.length;_<T;++_)if(typeof t[_]=="string"){v=t[_];break}}var q;is_function(d.login)?q=d.login:v&&(typeof d.login=="string"||d.login===!0)&&(q=E(v,d.login)),terminals.append(r);function J(){Xt&&(r.focus(),r.scroll_to_bottom())}function ne(){var n=xt[0].getBoundingClientRect();return n.width||1}function oe(){Xt=Ce,r.disable().find(".cmd textarea").trigger("blur",[!0])}function G(n){if(is_function(n)&&(n=n()),n&&is_function(n.then))return n.then(G);if(get_type(n)!=="string")if(is_function(d.parseObject)){var a=d.parseObject(n);get_type(a)==="string"&&(n=a)}else if(is_array(n))n=$.terminal.columns(n,r.cols(),d.tabs);else{var o=is_big_int(n);n=String(n),o&&(n+="n")}return n}function fe(n){if(n.proxy)return n;var a=function(o){return n.call(r,o,r)};return a.proxy=!0,a}function le(n){n=n.originalEvent;function a(A,H){return A.type.indexOf(H)!==-1}function o(A){r.echo('<img src="'+A+'"/>',{raw:!0})}function l(A){var H=window.URL||window.webkitURL;return H.createObjectURL(A)}function c(A,H){if(H)A instanceof Blob?o(l(A)):typeof A=="string"&&(A.match(/^(data:|blob:)/)?o(A):r.insert(A));else{var I={target:r};typeof A=="string"?I.text=A:A instanceof Blob&&(I.image=l(A));var Y=ce("onPaste",[I]);if(Y){if(is_function(Y.then||Y.done))return(Y.then||Y.done).call(Y,function(ae){c(ae,!0)});c(Y,!0)}else Y!==!1&&c(I.image||I.text,!0)}}if(n.clipboardData&&r.enabled()){var C=n.clipboardData.items;if(C)for(var k=0;k<C.length;k++)if(a(C[k],"image")&&d.pasteImage){var S=C[k].getAsFile();c(S)}else a(C[k],"text/plain")&&C[k].getAsString(function(A){c(A.replace(/\r/g,""))});else if(n.clipboardData.getData){var O=n.clipboardData.getData("text/plain");c(O.replace(/\r/g,""))}return!1}}$(document).on("paste.terminal_"+r.id(),le);var ge=$.extend({},Et,$.omap(d.keymap||{},function(n,a){return Et[n]?function(o,l){return a.call(r,o,function(){return Et[n](o,l)})}:a.bind(r)}));return B(t,d.login,function(n){(d.completion&&typeof d.completion!="boolean"||!d.completion)&&(n.completion="settings");var a=d.prompt;is_function(a)&&(a=fe(a)),me=new Stack($.extend({},d.extra,{name:d.name,prompt:a,keypress:d.keypress,keydown:d.keydown,resize:d.onResize,greetings:d.greetings,mousewheel:d.mousewheel,history:d.history,keymap:ge},n)),U=$("<div/>").appendTo(Ie).cmd({tabindex:d.tabindex,mobileDelete:d.mobileDelete,mobileIngoreAutoSpace:d.mobileIngoreAutoSpace,prompt:q?!1:a,history:d.memory?"memory":d.history,historyFilter:d.historyFilter,historySize:d.historySize,caseSensitiveSearch:d.caseSensitiveSearch,onPaste:d.onPaste,width:"100%",enabled:!1,charWidth:Se.width,keydown:wt,keymap:ge,clickTimeout:d.clickTimeout,holdTimeout:d.holdTimeout,holdRepeatTimeout:d.holdRepeatTimeout,repeatTimeoutKeys:d.repeatTimeoutKeys,allowedAttributes:d.allowedAttributes,keypress:$t,tabs:d.tabs,onPositionChange:function(){var b=[].slice.call(arguments);Ft(),ce("onPositionChange",b)},onCommandChange:function(b){nt!==Ve.width()&&r.resizer(),ce("onCommandChange",[b]),Ft()},commands:ve});function o(b){if(!is_mobile&&(b=b.originalEvent,b&&b.isTrusted)){var N=document.elementFromPoint(b.clientX,b.clientY);!$(N).closest(".terminal").length&&r.enabled()&&r.disable()}}r.oneTime(100,function(){$(document).bind("click.terminal_"+r.id(),o).bind("contextmenu.terminal_"+r.id(),o)});var l=$(window);if(document.addEventListener("resume",function(){r.disable()}),is_mobile)(function(){r.addClass("terminal-mobile");var b,N,W,X=3,K=U.clip(),_e=200,xe;K.$node.off("touchstart.cmd"),r.on("touchstart.terminal",function(De){if(De=De.originalEvent,window.touch_event=De,De.target.tagName.toLowerCase()!=="a"&&!Ke&&De.touches.length===1){W=r.enabled();var Re=De.touches[0];b={x:Re.clientX,y:Re.clientY},xe=setTimeout(function(){b=null},_e)}}).on("touchmove.terminal",function(De){if(De.touches.length===1&&b){var Re=De.touches[0],it=Math.abs(Re.clientX-b.x),Rt=Math.abs(Re.clientY-b.y);(it>X||Rt>X)&&(N=!0)}}).on("touchend.terminal",function(){b&&(clearTimeout(xe),N||(W?(K.blur(),r.disable()):(K.focus(),r.focus(),setTimeout(function(){r.scroll_to_bottom()},100)))),N=!1,b=null})})(),"visualViewport"in window&&on_height_change(function(b){css(document.documentElement,{"--terminal-force-height":b+"px"})});else{l.on("focus.terminal_"+r.id(),J).on("blur.terminal_"+r.id(),oe);var c;(function(){var b=0,N,W="click_"+r.id(),X=r.find(".cmd textarea");function K(){if(N.is(".terminal")||N.is(".terminal-scroller")||N.is(".terminal-wrapper")){var De=r.get_command().length;r.set_position(De)}else N.closest(".cmd-prompt").length&&r.set_position(0);X.is(":focus")||X.focus(),_e()}function _e(){b=0,N=null}var xe=".terminal-output textarea,.terminal-output input";r.mousedown(function(De){scrollbar_event(De,Ve,je)||(N=$(De.target))}).mouseup(function(){if(c){c=!1;return}if(N&&N.closest(xe).length)Ce&&r.disable();else if(get_selected_html()===""&&N)if(++b===1){if(!Ke)if(!Ce)r.focus(),r.scroll_to_bottom();else{var De=d.clickTimeout;r.oneTime(De,W,K);return}}else r.stopTime(W);_e()}).dblclick(function(){_e(),r.stopTime(W)})})(),function(){var b=U.clip().$node;function N(X){return X.type==="mousedown"&&X.buttons===2||X.type==="contextmenu"}var W;"oncontextmenu"in window?W="contextmenu.terminal":W="mousedown.terminal",r.on(W,function(X){if(c=get_selected_html()===""&&N(X)&&!X.ctrlKey,c){var K=$(X.target);if(K.is("img,value,audio,object,canvas,a"))return;r.enabled()||r.enable();var _e=U.offset(),xe=U[0].getBoundingClientRect(),De=r.offset(),Re=De.top-_e.top,it=Math.max(X.pageY-_e.top-20,Re),Rt=X.pageX-_e.left-20,Wt=4*14,Ht=5*14,qt=r[0].getBoundingClientRect(),Zt=Ve.outerWidth()*je,er=it+xe.top+Wt;er=er-qt.height-qt.top;var tr=Rt+xe.left+Ht;tr=tr-Zt-qt.left,er>0&&(Wt-=Math.ceil(er)),tr>0&&(Ht-=Math.ceil(tr)),b.attr("style",[style_prop("left",Rt,!0),style_prop("top",it,!0),style_prop("width",Ht,!0),style_prop("height",Wt,!0)].join(";")),b.is(":focus")||b.focus(),r.stopTime("textarea"),r.oneTime(100,"textarea",function(){var or={left:"",top:"",width:"",height:""};if(!is_css_variables_supported){var _r=r.find(".cmd .cmd-cursor-line").prevUntil(".cmd-prompt").length;or.top=_r*14+"px"}b.css(or)}),r.stopTime("selection"),r.everyTime(20,"selection",function(){b[0].selection!==b[0].value&&get_textarea_selection(b[0])&&(clear_textarea_selection(b[0]),select(r.find(".terminal-output")[0],r.find(".cmd div:last-of-type")[0]),r.stopTime("selection"))})}})}(),r.on("scroll",function(){var b=r.find("textarea"),N=r[0].getBoundingClientRect(),W=r[0].scrollHeight,X=he.scrollTop(),K=W-(X+N.height);K===0?b.css("top",""):b.css("top",-K)})}r.on("click","a",function(b){var N=$(this);if(N.closest(".terminal-exception").length){var W=N.attr("href");W.match(/:[0-9]+$/)&&(b.preventDefault(),L(W,r.cols()))}Ce&&r.find(".cmd textarea").focus()});function C(){var b=Se.width;Se=get_char_size(r),b!==Se.width&&U.option("charWidth",Se.width).refresh()}k();function k(){if(r.is(":visible")){var b=Ve.width(),N=Ve.height();je=ne(),Qe!==je&&css(r[0],{"--pixel-density":je}),s&&(s=!terminal_ready(r),s||(Se=get_char_size(r),C())),(lt!==N||nt!==b||je!==Qe)&&r.resize(),lt=N,nt=b,Qe=je}}function S(){var b={prefix:"terminal-"};r.resizer("unbind").resizer(k,b),Mt.resizer("unbind").resizer(function(){C(),r.resize()},b),xt.resizer("unbind").resizer(function(){je=ne(),r.refresh()},b),$('<div class="terminal-font-forcer terminal-hidden">x<div>').appendTo(r)}function O(b){yt=b[0].intersectionRatio>=.9}function A(){if(window.IntersectionObserver){var b=$('<div class="terminal-scroll-marker"/>').appendTo(he),N=b;if(d.scrollBottomOffset!==-1){var W=style_prop("height",d.scrollBottomOffset);N=$('<div style="'+W+'"/>').appendTo(b)}Ct=new IntersectionObserver(O,{root:he[0],rootMargin:"0px",threshold:1}),Ct.observe(N[0])}}A(),r.is(":visible")&&S();function H(){Le&&(Le.unobserve?Le.unobserve(r[0]):clearInterval(Le));var b=r.enabled(),N=r.is(":visible");b&&!N&&r.disable(),N?S():Ie.css("visibility","hidden");function W(){r.is(":visible")&&!N?(N=!0,S(),C(),k(),b&&r.enable(),Ie.css("visibility","")):N&&!r.is(":visible")&&(N=!1,b=$.terminal.active()===r&&r.enabled(),r.disable(),Ie.css("visibility","hidden"))}window.IntersectionObserver&&r.css("position")!=="fixed"?(Le=new IntersectionObserver(W,{root:null}),Le.observe(r[0])):Le=setInterval(W,100)}var I=!!r.closest("body").length,Y=window.MutationObserver||window.WebKitMutationObserver;Y&&(pt=new Y(function(){r.closest("body").length?(I||(r.scroll_to_bottom(),H(),k()),I=!0):I&&(I=!1)}),pt.observe(document.body,{childList:!0})),I&&H(),document.fonts&&document.fonts.ready?document.fonts.ready.then(function(){have_custom_font(r)&&(C(),r.resize()),Pt.resolve()}):Pt.resolve(),Ce&&r.is(":visible")&&!is_mobile?r.focus(undefined,!0):r.disable(),is_function(q)?(r.login(q,!0,ut),Tt.resolve(),at()):(ut(),at());function ae(b,N){var W=terminals.get()[b[0]],X=$.Deferred();if(W&&rt===W.id())return b[2]?Te?(Be.push(function(){return W.exec(b[2],N).done(function(){W.save_state(b[2],!0,b[1]),X.resolve()})}),X.promise()):W.exec(b[2],N).done(function(){W.save_state(b[2],!0,b[1])}):(X.resolve(),X.promise())}d.execHash&&location.hash?setTimeout(function(){try{var b=location.hash.replace(/^#/,"");hash_commands=JSON.parse(decodeURIComponent(b)),b.match(/\[/)||He(hash_commands);var N=0,W={typing:d.execAnimation,delay:d.execAnimationDelay};(function X(){var K=hash_commands[N++];K?ae(K,W).done(X):change_hash=!0})()}catch{}}):change_hash=!0,function(){var b=!1;$(document).bind("keydown.terminal_"+r.id(),function(K){K.shiftKey&&(b=!0)}).bind("keyup.terminal_"+r.id(),function(K){(K.shiftKey||K.which===16)&&(b=!1)});function N(K,_e){if(!b){var xe=me.top(),De;if(is_function(xe.mousewheel)?De=xe.mousewheel(K,_e,r):is_function(d.mousewheel)&&(De=d.mousewheel(K,_e,r)),De===!0)return;if((Z()||De===!1)&&!K.ctrlKey&&(K.stopPropagation(),K.preventDefault()),De===!1)return!1;_e>0?r.scroll(-40):r.scroll(40)}}if($.event.special.mousewheel)he.on("mousewheel",N);else{var W,X=document.createElement("div");"onwheel"in X?W="wheel":document.onmousewheel!==undefined?W="mousewheel":W="DOMMouseScroll",X=null,r.on(W,function(K){var _e;W==="mousewheel"?_e=-1/40*K.originalEvent.wheelDelta:_e=K.originalEvent.deltaY||K.originalEvent.detail,N(K,-_e)})}he.touch_scroll(function(K){var _e=K.current.clientY-K.previous.clientY,xe,De=me.top();if(is_function(De.touchscroll)?xe=De.touchscroll(K,_e,r):is_function(d.touchscroll)&&(xe=d.touchscroll(K,_e,r)),css(r[0],{"--terminal-scroll":he.prop("scrollTop")}),xe!==!0)return!1})}()}),r}})});export default br();
